{"version":3,"sources":["webpack:////Users/mayongjian/Desktop/hongshu_boot/uniapp_hongshu/pages/main/main.vue?fcdc","webpack:////Users/mayongjian/Desktop/hongshu_boot/uniapp_hongshu/pages/main/main.vue?a1fb","uni-app:///main.js","webpack:////Users/mayongjian/Desktop/hongshu_boot/uniapp_hongshu/pages/main/main.vue?a735","webpack:////Users/mayongjian/Desktop/hongshu_boot/uniapp_hongshu/pages/main/main.vue?221b","webpack:////Users/mayongjian/Desktop/hongshu_boot/uniapp_hongshu/pages/main/main.vue?401b","webpack:////Users/mayongjian/Desktop/hongshu_boot/uniapp_hongshu/pages/main/main.vue?f847","uni-app:///pages/main/main.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","Comment","InputEmoji","data","noteId","imgList","imgInfo","count","album","content","comment","placeholder","val","parentId","comArr","isCollection","userIsLike","T","isCurrentUser","useful_flag","cursor","show","fn","commentInfo","scrollTop","old","isshow","affirmId","selectImgs","popupShow","batchSaveShow","shareList","share","name","icon","color","size","operate","operate2","onLoad","created","onBackPress","methods","active","close","addCommentWithEmoji","scroll","getScrollTop","delComment","back","uni","delta","isFollow","uid","fid","follow","followDTo","clearFollow","isAgree","agreeImg","addAgree","cancelAgreeImg","cancelAgreeComment","cancelCollect","isCollectImgToAlbum","mid","previewImgae","current","urls","longPressActions","itemList","success","p","title","that","fail","getOne","loadData","getComment","addComment","getUserInfo","url","saveImgToAlbum","downLoadImg","filePath","resolve","reject","toAlbum","popup","arr","setTimeout","batchShow","delAffirm","selectAll","cancalAll","delCancel","batchSave","toTagList","console"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAusC,CAAgB,unCAAG,EAAC,C;;;;;;;;;;;ACA3tC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,6PAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,iPAEN;AACP,KAAK;AACL;AACA,aAAa,+QAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5GA;AAAA;AAAA;AAAA;AAAk0B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACqNt1B;AAIA;AAGA;AAGA;AAMA;AAKA;AAGA;AAEA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MAEAC;MAEA;MACAC;MAEA;MACAC;MACAC;QACAD;MACA;MAEA;MACAE;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;QACAC;UACAC;UACAC;UACAC;UACAC;QACA;UACAH;UACAC;UACAC;QACA;UACAF;UACAC;UACAC;UACAC;QACA;UACAH;UACAC;UACAC;QACA;MACA;QACAE;UACAJ;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA;MAEA;QACAE;UACAL;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA;MAEA;IACA;EACA;EACAG;IACA;IACA;IAEA;MACA;MACA;IACA;EACA;EAEAC;IACA;EACA;EACAC;IACA;AACA;AACA;AACA;AACA;IACA;MACA;IACA;IACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;IAEA;IAEAC;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;QACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;;MAEA;MACA;;MAEA;MACA;MACA;MACA;;MAEA;MACA;;MAGA;;MAEA;MACA;QACAC;UACAC;QACA;MACA;QACAD;UACAC;QACA;MACA;IAGA;IACA;IACAC;MAAA;MACA;MAEA;MACA;QACAC;QACAC;MACA;MACA;QAEA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACAC;MACAA;MACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MACAD;MACAA;MACA;QACA;MACA;IACA;IAEA;IACAE;MAAA;MACA;MACAvD;MACAA;MACAA;MACAA;MAEA;QAEA;MAEA;IACA;IAEAwD;MAAA;MACA;MACAxD;MACAA;MACAA;MACAA;MAEA;QACA;QACA;MACA;IACA;IAEAyD;MAEA;MACAzD;MACAA;MACAA;MACAA;MACA;IACA;IAEA0D;MAAA;MAEA;MACA1D;MACAA;MACAA;MACAA;MACA;QACA;QACA;MACA;IAEA;IAEA2D;MACA;MACA3D;MACAA;MACAA;MACAA;MACA;IACA;IAEA4D;MAAA;MAEA;QACA;MACA;MACA;MACA5D;MACAA;MACAA;MACAA;MACA;QACA;QACA;MACA;IACA;IAGA6D;MAAA;MAEA;QACAX;QACAY;MACA;MACA;QAEA;MACA;IACA;IAEA;IACAC;MACA;MACAhB;QACAiB;QAAA;QACAC;QAAA;QACAC;UACAC;UACAC;YAEA;YACA;cACA;cACAC;gBACAtB;kBACAuB;kBACAvC;gBACA;cACA;YACA;YACA;YACA;cACAwC;YACA;UAGA;UACAC;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MAEA;QACAxE;MACA;MACA;QAEA;QACA;QACA;QACA;QACA;QAEA;QACA;QACA;QACA;UACA;QACA;MAEA;IACA;IACAyE;MACA;IACA;IAEAC;MACA;;MAEA;MACA;MACA;IACA;IAEAC;MAAA;MACA;MAEA;QACA;MACA;QAEA;QACAxD;QACAA;QACAA;QACA;QACA;UACAA;UACAA;UACAA;UACAA;QAEA;UACAA;UACAA;UACAA;UACA;UACA;YACAA;UACA;YACAA;UACA;QACA;QAEA;UACA;UACA;UACA;UACA;UACA;UAEA;YACA;UACA;QAEA;MACA;IACA;IACAyD;MACA9B;QACA+B;MACA;IACA;IAEAC;MAEA;QACAhC;UACAuB;UACAvC;QACA;QACA;MACA;MAEAgB;QACA+B;MACA;IACA;IACA;IACAE;MACA;MACA;QACAjC;UACA+B;UACAV;YACA;cACA;cACArB;gBACAkC;gBACAb;kBACAc;gBACA;gBACAV;kBACAW;gBACA;cACA;YACA;UACA;QACA;MACA;MACA;IAEA;IAEAC;MACArC;QACA+B;MACA;IACA;IAEA;IACAO;MACA;IACA;IACAnD;MAEA;MACA;QAEAa;UACA+B;QACA;MACA;QAEA;QACAQ;QACA;UACAvC;YACAuB;UACA;UAEAiB;YACAxC;cACA+B;YACA;UACA;QAEA;MACA;QAEA;QACA;QACA;UACA;QACA;MAEA;IACA;IAEA3C;MAEA;QACA;QACA;QACA;QACA;UACA;QACA;MACA;IACA;IAEAqD;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;QACA;MACA;IACA;IACAC;MAEA;IACA;IACAC;MACA;QACA;UACA;UACA;QACA;MACA;IACA;IAEAC;MAAA;MACA9C;QACAuB;QACAvC;MACA;MAEA;QACA;MACA;MAEAwD;QACAxC;UACAuB;UACAvC;QACA;QAEA;MACA;IACA;IAEA+D;MACAC;MACAhD;QACA+B;MACA;IACA;IAEAjD;MAEA;QACA;MAAA;IAGA;EAGA;AAEA;AAAA,2B","file":"pages/main/main.js","sourcesContent":["import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=52f690a6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=52f690a6&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1737278863239\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/main/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=52f690a6&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=52f690a6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52f690a6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/main/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=52f690a6&scoped=true&\"","var components\ntry {\n  components = {\n    tuiNavigationBar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-navigation-bar/tui-navigation-bar\" */ \"thorui-uni/lib/thorui/tui-navigation-bar/tui-navigation-bar.vue\"\n      )\n    },\n    tuiIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-icon/tui-icon\" */ \"thorui-uni/lib/thorui/tui-icon/tui-icon.vue\"\n      )\n    },\n    tuiButton: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-button/tui-button\" */ \"thorui-uni/lib/thorui/tui-button/tui-button.vue\"\n      )\n    },\n    tuiBottomPopup: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-bottom-popup/tui-bottom-popup\" */ \"thorui-uni/lib/thorui/tui-bottom-popup/tui-bottom-popup.vue\"\n      )\n    },\n    tuiGrid: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-grid/tui-grid\" */ \"thorui-uni/lib/thorui/tui-grid/tui-grid.vue\"\n      )\n    },\n    tuiGridItem: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-grid-item/tui-grid-item\" */ \"thorui-uni/lib/thorui/tui-grid-item/tui-grid-item.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.isCurrentUser\n    ? _vm.__map(_vm.shareList[1].operate, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var g0 = _vm.shareList[1].operate.length\n        return {\n          $orig: $orig,\n          g0: g0,\n        }\n      })\n    : null\n  var l1 = !_vm.isCurrentUser\n    ? _vm.__map(_vm.shareList[2].operate2, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var g1 = _vm.shareList[2].operate2.length\n        return {\n          $orig: $orig,\n          g1: g1,\n        }\n      })\n    : null\n  var g2 = _vm.shareList[0].share.length\n  var g3 =\n    _vm.imgInfo.imgsUrl != null &&\n    _vm.imgInfo.imgsUrl.length == _vm.selectImgs.length\n  var g4 =\n    _vm.imgInfo.imgsUrl != null &&\n    _vm.imgInfo.imgsUrl.length == _vm.selectImgs.length\n  var l2 = _vm.__map(_vm.imgInfo.imgsUrl, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g5 = _vm.selectImgs.includes(index)\n    var g6 = _vm.selectImgs.includes(index)\n    return {\n      $orig: $orig,\n      g5: g5,\n      g6: g6,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        l2: l2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"content\">\n\t\t<tui-navigation-bar backgroundColor=\"#fff\" :isFixed=\"true\" :isOpacity=\"false\">\n\t\t\t<view class=\"nav\">\n\t\t\t\t<view @click=\"back\"><tui-icon name=\"arrowleft\" size=\"24\"></tui-icon></view>\n\t\t\t\t<view class=\"center\">\n\t\t\t\t\t<view @click=\"getUserInfo(imgInfo.uid)\">\n\t\t\t\t\t\t<image class=\"avatar\" :src=\"imgInfo.avatar\" mode=\"aspectFill\" />\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"username\">{{ imgInfo.username }}</view>\n\n\t\t\t\t\t<view v-if=\"!isCurrentUser\" class=\"followStatus\">\n\t\t\t\t\t\t<view v-if=\"T\">\n\t\t\t\t\t\t\t<tui-button @click=\"clearFollow(imgInfo.uid)\" type=\"gray\" height=\"50rpx\" :size=\"22\"\n\t\t\t\t\t\t\t\twidth=\"100rpx\" shape=\"circle\" plain>已关注</tui-button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-else>\n\t\t\t\t\t\t\t<tui-button @click=\"follow(imgInfo.uid)\" type=\"danger\" height=\"50rpx\" :size=\"22\"\n\t\t\t\t\t\t\t\twidth=\"100rpx\" shape=\"circle\" plain>关注</tui-button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<tui-icon name=\"more-fill\" size=\"20\" @click=\"popup\"></tui-icon>\n\t\t\t</view>\n\t\t</tui-navigation-bar>\n\t\t<scroll-view scroll-y class=\"page\" @scrolltolower=\"loadData\" @scroll=\"scroll\" :scroll-top=\"scrollTop\">\n\t\t\t<view class=\"img-list\">\n\t\t\t    <swiper :autoplay=\"false\" :indicator-dots=\"true\" :circular=\"true\" style=\"height: 800rpx;\">\n\t\t\t      <swiper-item v-for=\"(item, index) in imgList\" :key=\"index\">\n\t\t\t        <image :src=\"item\" mode=\"aspectFill\" @click=\"previewImgae(index)\" style=\"width: 100%; height: 800rpx;\" />\n\t\t\t      </swiper-item>\n\t\t\t    </swiper>\n\t\t\t</view>\n\t\t\t<view class=\"cont\">\n\t\t\t\t<view class=\"img-content\">{{ imgInfo.title }}</view>\n\t\t\t\t<view class=\"time\">{{ imgInfo.time }} | {{ imgInfo.viewCount }}浏览</view>\n\t\t\t</view>\n\t\t\t<!-- <view class=\"relation\">\n\t\t\t\t<view class=\"r-all\">\n\t\t\t\t\t<h4>所属专辑</h4>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"r-list\">\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li class=\"r-item\" @click='toAlbum(album.id)'>\n\t\t\t\t\t\t\t<image :src=\"album.cover\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t<view class=\"item-content\">\n\t\t\t\t\t\t\t\t<h4>{{ album.name }}</h4>\n\t\t\t\t\t\t\t\t<p>{{ album.imgCount }}张图片|{{ album.collectionCount }}人收藏</p>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"r-tag\">\n\t\t\t\t\t<view v-for=\"(tag, index) in imgInfo.tagList\" :key=\"index\">\n\t\t\t\t\t\t<tui-tag type=\"gray\" shape=\"circle\" margin=\"10rpx\" size=\"24rpx\"\n\t\t\t\t\t\t\t@click=\"toTagList(tag.id)\">{{ tag.name }}</tui-tag>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view> -->\n\n\t\t\t<view class=\"comment\" v-if='imgInfo.commentCount>0'>\n\t\t\t\t<view style=\"font-weight: bold;margin-left: 40rpx;\">所有评论</view>\n\t\t\t\t<!--  scrollTop，comArr实现评论跳转，-->\n\t\t\t\t<comment :mid='imgInfo.id' @getComment=\"getComment\" @addAgree=\"addAgree\" @scrollTop=\"getScrollTop\"\n\t\t\t\t\t@cancelAgreeComment=\"cancelAgreeComment\" :val=\"val\" :parentId=\"parentId\" :comArr='comArr'\n\t\t\t\t\t:commentInfo='commentInfo' :currentUid='imgInfo.uid' @delComment='delComment'>\n\t\t\t\t</comment>\n\t\t\t\t<!-- 评论功能 -->\n\t\t\t</view>\n\t\t\t<view v-else style=\"height: 200rpx\"></view>\n\n\t\t</scroll-view>\n\n\t\t<!-- 底部输入框 -->\n\t\t<view :class=\"fn?'fotter fotter-none':'fotter'\">\n\n\t\t\t<view v-if=\"!useful_flag\" class=\"fotter-info\">\n\t\t\t\t<view class=\"fotter-content\" @click=\"active\">{{ placeholder }}</view>\n\t\t\t\t<tui-icon name=\"star-fill\" size=\"20\" v-if=\"imgInfo.isCollection\" @click=\"cancelCollect()\" style=\"color: orange\"></tui-icon>\n\t\t\t\t<tui-icon name=\"star\" size=\"20\" v-else @click=\"saveImgToAlbum()\"></tui-icon>\n\t\t\t\t<view class=\"fotter-c-a\">{{ imgInfo.collectionCount }}</view>\n\n\t\t\t\t<tui-icon name=\"like-fill\" size=\"20\" v-if=\"imgInfo.isLike\" @click=\"cancelAgreeImg()\" style=\"color: red;\">></tui-icon>\n\t\t\t\t<tui-icon name=\"like\" size=\"20\" v-else @click=\"agreeImg\"></tui-icon>\n\t\t\t\t<view class=\"fotter-c-a\">{{ imgInfo.likeCount }}</view>\n\t\t\t</view>\n\n\t\t\t<!-- 新增表情发送 -->\n\t\t\t<input-emoji v-else :useful_flag=\"useful_flag\" :cursor=\"cursor\" @addCommentWithEmoji=\"addCommentWithEmoji\"\n\t\t\t\t:placeholder=\"placeholder\">\n\t\t\t</input-emoji>\n\t\t</view>\n\t\t<!-- 底部输入框完成 -->\n\n\t\t<!--底部分享弹窗-->\n\t\t<tui-bottom-popup backgroundColor=\"#f6f6f6\" :zIndex=\"1002\" :maskZIndex=\"1001\" :show=\"popupShow\" @close=\"popup\">\n\t\t\t<view class=\"tui-share\">\n\t\t\t\t<view class=\"tui-share-title\">操作</view>\n\n\t\t\t\t<view class=\"tui-share-top\" v-if=\"isCurrentUser\">\n\n\t\t\t\t\t<view class=\"tui-share-item\"\n\t\t\t\t\t\t:class=\"[shareList[1].operate.length - 1 === index ? 'tui-item-last' : '']\"\n\t\t\t\t\t\tv-for=\"(item, index) in shareList[1].operate\" :key=\"index\" @tap=\"popup\">\n\t\t\t\t\t\t<view class=\"tui-share-icon\" hover-class=\"tui-hover\" :hover-stay-time=\"150\">\n\t\t\t\t\t\t\t<view @click=\"operate(index)\">\n\t\t\t\t\t\t\t\t<tui-icon :name=\"item.icon\" color=\"#404040\" :size=\"item.size\"></tui-icon>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"tui-share-text\">{{ item.name }}</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"tui-share-top\" v-else>\n\n\t\t\t\t\t<view class=\"tui-share-item\"\n\t\t\t\t\t\t:class=\"[shareList[2].operate2.length - 1 === index ? 'tui-item-last' : '']\"\n\t\t\t\t\t\tv-for=\"(item, index) in shareList[2].operate2\" :key=\"index\" @tap=\"popup\">\n\t\t\t\t\t\t<view class=\"tui-share-icon\" hover-class=\"tui-hover\" :hover-stay-time=\"150\">\n\t\t\t\t\t\t\t<view @click=\"operate2(index)\">\n\t\t\t\t\t\t\t\t<tui-icon :name=\"item.icon\" color=\"#404040\" :size=\"item.size\"></tui-icon>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"tui-share-text\">{{ item.name }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"tui-share-bottom tui-mt\">\n\t\t\t\t\t<view class=\"tui-share-item\"\n\t\t\t\t\t\t:class=\"[shareList[0].share.length - 1 === index ? 'tui-item-last' : '']\"\n\t\t\t\t\t\tv-for=\"(item, index) in shareList[0].share\" :key=\"index\" @tap=\"popup\">\n\t\t\t\t\t\t<view class=\"tui-share-icon\" hover-class=\"tui-hover\" :hover-stay-time=\"150\"\n\t\t\t\t\t\t\t@click=\"share(index)\">\n\t\t\t\t\t\t\t<tui-icon :name=\"item.icon\" :color=\"item.color\"\n\t\t\t\t\t\t\t\t:size=\"item.size ? item.size : 36\"></tui-icon>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"tui-share-text\">{{ item.name }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"tui-empty\">!</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"tui-btn-cancle\" @tap=\"popup\">取消</view>\n\t\t\t</view>\n\t\t</tui-bottom-popup>\n\t\t<!--底部分享弹窗-->\n\n\n\t\t<!-- 批量保存 -->\n\t\t<tui-bottom-popup backgroundColor=\"#ffffff\" :zIndex=\"1002\" :maskZIndex=\"1001\" :show=\"batchSaveShow\"\n\t\t\t@close=\"batchShow\">\n\t\t\t<view class=\"tui-share\">\n\t\t\t\t<view class=\"tui-share-title popup-top\">\n\n\t\t\t\t\t<view @click=\"batchShow\">取消</view>\n\t\t\t\t\t<view style=\"font-size: 28rpx; color: black; font-style: inherit;\">选择需要保存的图片</view>\n\t\t\t\t\t<view class=\"selectAll\">\n\t\t\t\t\t\t<view class=\"all-icon\">\n\t\t\t\t\t\t\t<tui-icon name=\"circle-fill\" color=\"#ff626c\"\n\t\t\t\t\t\t\t\tv-if=\"imgInfo.imgsUrl!=null&&imgInfo.imgsUrl.length == selectImgs.length\" size=\"18\"\n\t\t\t\t\t\t\t\t@click=\"cancalAll()\"></tui-icon>\n\t\t\t\t\t\t\t<tui-icon name=\"circle\" size=\"18\" v-else @click=\"selectAll()\"></tui-icon>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"all-title\">\n\t\t\t\t\t\t\t<view v-if=\"imgInfo.imgsUrl!=null&&imgInfo.imgsUrl.length == selectImgs.length\" size=\"18\"\n\t\t\t\t\t\t\t\t@click=\"cancalAll()\" style=\"color:#ff626c ;\">全部</view>\n\t\t\t\t\t\t\t<view v-else @click=\"selectAll()\">全部</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\n\t\t\t\t<view class=\"pictures\">\n\n\t\t\t\t\t<tui-grid :unlined=\"true\">\n\t\t\t\t\t\t<block v-for=\"(item, index) in imgInfo.imgsUrl\" :key=\"index\">\n\t\t\t\t\t\t\t<tui-grid-item :cell=\"3\" :border=\"false\" :bottomLine=\"false\">\n\t\t\t\t\t\t\t\t<view class=\"card\">\n\n\t\t\t\t\t\t\t\t\t<view class=\"card-circle\" v-if=\"!selectImgs.includes(index)\"\n\t\t\t\t\t\t\t\t\t\t@click=\"delAffirm(index)\">\n\t\t\t\t\t\t\t\t\t\t<tui-icon name=\"circle\" size=\"22\" @click=\"delCancel(index)\">\n\t\t\t\t\t\t\t\t\t\t</tui-icon>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"card-circle\" v-if=\"selectImgs.includes(index)\"><tui-icon\n\t\t\t\t\t\t\t\t\t\t\tname=\"circle-fill\" color=\"#ff626c\" size=\"22\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"delCancel(index)\"></tui-icon>\n\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t<image :src=\"item\" @click=\"previewImgae(index)\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</tui-grid-item>\n\t\t\t\t\t\t</block>\n\t\t\t\t\t</tui-grid>\n\t\t\t\t</view>\n\n\n\t\t\t\t<view class=\"tui-btn-cancle\" style=\"background-color: #fff;\">\n\t\t\t\t\t<tui-button type=\"danger\" @click=\"batchSave()\" shape=\"circle\" width='560rpx' height=\"80rpx\"\n\t\t\t\t\t\t:size='28'>批量下载</tui-button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</tui-bottom-popup>\n\t\t<!-- 批量保存 -->\n\t\t<!-- 蒙板 -->\n\t\t<view class=\"shade\" v-show=\"show\" @click=\"close\"></view>\n\n\t</view>\n</template>\n\n<script>\n\timport Comment from \"@/components/comment.vue\"\n\timport InputEmoji from \"@/components/inputEmoji.vue\"\n\timport {\n\t\tgetOne,\n\t\tdeleteImgs\n\t} from '@/api/imgDetail.js'\n\timport {\n\t\taddComment\n\t} from \"@/api/comment.js\"\n\timport {\n\t\tisCollectImgToAlbum\n\t} from \"@/api/album.js\"\n\timport {\n\t\tagree,\n\t\tisAgree,\n\t\tcancelAgree,\n\t\tcancelCollection\n\t} from \"@/api/agreeCollect.js\"\n\timport {\n\t\tisFollow,\n\t\tfollowUser,\n\t\tclearFollow\n\t} from \"@/api/follow.js\"\n\timport {\n\t\tappConfig\n\t} from '@/config/config.js'\n\timport {\n\t\ttimeAgo\n\t} from \"@/utils/webUtils.js\"\n\texport default {\n\t\tcomponents: {\n\t\t\tComment,\n\t\t\tInputEmoji\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tnoteId: '',\n\t\t\t\timgList: [],\n\t\t\t\timgInfo: {},\n\t\t\t\tcount: 0,\n\t\t\t\talbum: {},\n\t\t\t\tcontent: '',\n\t\t\t\tcomment: {},\n\n\t\t\t\tplaceholder: '请输入内容~',\n\t\t\t\tval: 0,\n\t\t\t\tparentId: '',\n\t\t\t\tcomArr: [],\n\t\t\t\tisCollection: false,\n\t\t\t\tuserIsLike: false,\n\t\t\t\tT: false,\n\t\t\t\tisCurrentUser: false,\n\n\t\t\t\t//\n\t\t\t\tuseful_flag: false,\n\t\t\t\tcursor: false,\n\t\t\t\tshow: false,\n\n\t\t\t\tfn: false,\n\n\t\t\t\t//\n\t\t\t\tcommentInfo: {},\n\n\t\t\t\t//滚动\n\t\t\t\tscrollTop: 0,\n\t\t\t\told: {\n\t\t\t\t\tscrollTop: 0\n\t\t\t\t},\n\n\t\t\t\t//批量保存\n\t\t\t\tisshow: false,\n\t\t\t\taffirmId: '',\n\t\t\t\tselectImgs: [],\n\n\t\t\t\t//实现编辑操作\n\t\t\t\tpopupShow: false,\n\t\t\t\tbatchSaveShow: false,\n\t\t\t\tshareList: [{\n\t\t\t\t\tshare: [{\n\t\t\t\t\t\tname: \"QQ\",\n\t\t\t\t\t\ticon: \"qq\",\n\t\t\t\t\t\tcolor: \"#07BDFD\",\n\t\t\t\t\t\tsize: 34\n\t\t\t\t\t}, {\n\t\t\t\t\t\tname: \"微信\",\n\t\t\t\t\t\ticon: \"wechat\",\n\t\t\t\t\t\tcolor: \"#80D640\"\n\t\t\t\t\t}, {\n\t\t\t\t\t\tname: \"朋友圈\",\n\t\t\t\t\t\ticon: \"moments\",\n\t\t\t\t\t\tcolor: \"#80D640\",\n\t\t\t\t\t\tsize: 32\n\t\t\t\t\t}, {\n\t\t\t\t\t\tname: \"复制链接\",\n\t\t\t\t\t\ticon: \"applets\",\n\t\t\t\t\t\tcolor: \"#2BA348\"\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\toperate: [{\n\t\t\t\t\t\t\tname: \"编辑\",\n\t\t\t\t\t\t\ticon: \"edit\",\n\t\t\t\t\t\t\tsize: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"删除图片\",\n\t\t\t\t\t\t\ticon: \"offline\",\n\t\t\t\t\t\t\tsize: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"社区公约\",\n\t\t\t\t\t\t\ticon: \"nodata\",\n\t\t\t\t\t\t\tsize: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"批量保存\",\n\t\t\t\t\t\t\ticon: \"picture\",\n\t\t\t\t\t\t\tsize: 28\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}, {\n\t\t\t\t\toperate2: [{\n\t\t\t\t\t\t\tname: \"批量保存\",\n\t\t\t\t\t\t\ticon: \"picture\",\n\t\t\t\t\t\t\tsize: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"不感兴趣\",\n\t\t\t\t\t\t\ticon: \"dissatisfied\",\n\t\t\t\t\t\t\tsize: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"举报\",\n\t\t\t\t\t\t\ticon: \"about\",\n\t\t\t\t\t\t\tsize: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"社区公约\",\n\t\t\t\t\t\t\ticon: \"immore\",\n\t\t\t\t\t\t\tsize: 28\n\t\t\t\t\t\t},\n\t\t\t\t\t]\n\t\t\t\t}],\n\t\t\t}\n\t\t},\n\t\tonLoad(option) {\n\t\t\tthis.noteId = option.mid\n\t\t\tthis.imgInfo.id = option.mid\n\n\t\t\tif (option.cid != null) {\n\t\t\t\tthis.comArr[0] = option.cid\n\t\t\t\tthis.comArr[1] = option.rid\n\t\t\t}\n\t\t},\n\n\t\tcreated() {\n\t\t\tthis.getOne()\n\t\t},\n\t\tonBackPress(options) {\n\t\t\t/**\n\t\t\t * 由于 uni.navigateBack() 同样会触发 onBackPress 函数。\n\t\t\t * 因此在 onBackPress 中直接调用 uni.navigateBack() 并始终返回 true 会引发死循环。\n\t\t\t * 此时，需要根据onBackPress的回调对象中的from值来做处理，当来源是'navigateBack'时，返回 false 。\n\t\t\t */\n\t\t\tif (options.from === 'navigateBack') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.back();\n\t\t\treturn true;\n\t\t},\n\t\tmethods: {\n\t\t\tactive() {\n\t\t\t\tthis.useful_flag = true\n\t\t\t\tthis.cursor = true\n\t\t\t\tthis.show = true\n\t\t\t},\n\n\t\t\tclose() {\n\t\t\t\tthis.useful_flag = false\n\t\t\t\tthis.show = false\n\t\t\t\tthis.placeholder = '请输入内容~'\n\t\t\t\tthis.comment = {}\n\n\t\t\t},\n\n\t\t\taddCommentWithEmoji(content) {\n\t\t\t\tthis.useful_flag = false\n\t\t\t\tthis.show = false\n\t\t\t\tthis.content = content\n\t\t\t\tthis.addComment()\n\t\t\t},\n\n\t\t\tscroll(e) {\n\t\t\t\tthis.old.scrollTop = e.detail.scrollTop\n\t\t\t},\n\n\t\t\tgetScrollTop(top) {\n\t\t\t\tthis.scrollTop = this.old.scrollTop\n\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\tthis.scrollTop = top\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tdelComment(flag) {\n\t\t\t\tthis.fn = flag\n\t\t\t},\n\n\t\t\tback() {\n\t\t\t\t//测试返回上一页面传递参数\n\t\t\t\t//    let currentTab = this.currentTab\n\n\t\t\t\t// // 1. 获取当前页面栈实例（此时最后一个元素为当前页）\n\t\t\t\t//let pages = getCurrentPages()\n\n\t\t\t\t// // 2. 上一页面实例\n\t\t\t\t// // 注意是length长度，所以要想得到上一页面的实例需要 -2\n\t\t\t\t// // 若要返回上上页面的实例就 -3，以此类推\n\t\t\t\t// let prevPage = pages[pages.length - 2]\n\n\t\t\t\t// // 3. 给上一页面实例绑定getValue()方法和参数（注意是$vm）\n\t\t\t\t// prevPage.$vm.getValue(currentTab)\n\n\n\t\t\t\tlet pages = getCurrentPages()\n\n\t\t\t\t//返回上一页面部分\n\t\t\t\tif (this.isCollection) {\n\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\tdelta: pages.length\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t})\n\t\t\t\t}\n\n\n\t\t\t},\n\t\t\t//-------------------关注部分-------------------\n\t\t\tisFollow() {\n\t\t\t\tlet uid = uni.getStorageSync(\"userInfo\").id\n\n\t\t\t\tlet fid = this.imgInfo.userId\n\t\t\t\tlet params = {\n\t\t\t\t\tuid: uid,\n\t\t\t\t\tfid: fid\n\t\t\t\t}\n\t\t\t\tisFollow(params).then(res => {\n\n\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\tthis.T = true\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.T = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//关注用户\n\t\t\tfollow(fid) {\n\t\t\t\tlet curUser = uni.getStorageSync(\"userInfo\")\n\t\t\t\tlet followDTo = {}\n\t\t\t\tfollowDTo.uid = curUser.id\n\t\t\t\tfollowDTo.fid = fid\n\t\t\t\t//添加关注\n\t\t\t\tfollowUser(followDTo).then(res => {\n\t\t\t\t\tthis.T = true;\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t//取消关注\n\t\t\tclearFollow(fid) {\n\t\t\t\tlet user = uni.getStorageSync(\"userInfo\")\n\t\t\t\tlet followDTo = {}\n\t\t\t\tfollowDTo.uid = user.id\n\t\t\t\tfollowDTo.fid = fid\n\t\t\t\tclearFollow(followDTo).then(res => {\n\t\t\t\t\tthis.T = false;\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t//----------------------点赞部分-----------------\n\t\t\tisAgree() {\n\t\t\t\tlet data = {}\n\t\t\t\tdata.uid = uni.getStorageSync(\"userInfo\").id\n\t\t\t\tdata.type = 1\n\t\t\t\tdata.likeOrCollectionId = this.imgInfo.id\n\t\t\t\tdata.publishUid = uni.getStorageSync(\"userInfo\").id\n\n\t\t\t\tisAgree(data).then(res => {\n\n\t\t\t\t\tthis.userIsLike = res.data\n\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tagreeImg() {\n\t\t\t\tlet data = {}\n\t\t\t\tdata.uid = uni.getStorageSync(\"userInfo\").id\n\t\t\t\tdata.type = 1\n\t\t\t\tdata.likeOrCollectionId = this.imgInfo.id\n\t\t\t\tdata.publishUid = this.imgInfo.uid\n\n\t\t\t\tagree(data).then(res => {\n\t\t\t\t\tthis.userIsLike = true\n\t\t\t\t\tthis.imgInfo.likeCount = this.imgInfo.likeCount * 1 + 1\n\t\t\t\t})\n\t\t\t},\n\n\t\t\taddAgree(comment) {\n\n\t\t\t\tlet data = {}\n\t\t\t\tdata.uid = uni.getStorageSync(\"userInfo\").id\n\t\t\t\tdata.type = 0\n\t\t\t\tdata.likeOrCollectionId = comment.id\n\t\t\t\tdata.publishUid = comment.uid\n\t\t\t\tagree(data).then()\n\t\t\t},\n\n\t\t\tcancelAgreeImg() {\n\n\t\t\t\tlet data = {}\n\t\t\t\tdata.uid = uni.getStorageSync(\"userInfo\").id\n\t\t\t\tdata.likeOrCollectionId = this.imgInfo.id\n\t\t\t\tdata.publishUid = this.imgInfo.userId\n\t\t\t\tdata.type = 1\n\t\t\t\tcancelAgree(data).then(res => {\n\t\t\t\t\tthis.userIsLike = false\n\t\t\t\t\tthis.imgInfo.likeCount = this.imgInfo.likeCount * 1 - 1\n\t\t\t\t})\n\n\t\t\t},\n\n\t\t\tcancelAgreeComment(comment) {\n\t\t\t\tlet data = {}\n\t\t\t\tdata.uid = uni.getStorageSync(\"userInfo\").id\n\t\t\t\tdata.likeOrCollectionId = comment.id\n\t\t\t\tdata.publishUid = comment.uid\n\t\t\t\tdata.type = 0\n\t\t\t\tcancelAgree(data).then()\n\t\t\t},\n\n\t\t\tcancelCollect() {\n\n\t\t\t\tif (this.imgInfo.userId == uni.getStorageSync(\"userInfo\").id) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet data = {}\n\t\t\t\tdata.uid = uni.getStorageSync(\"userInfo\").id\n\t\t\t\tdata.likeOrCollectionId = this.imgInfo.id\n\t\t\t\tdata.publishUid = this.imgInfo.userId\n\t\t\t\tdata.type = 2\n\t\t\t\tcancelCollection(data).then(res => {\n\t\t\t\t\tthis.isCollection = false\n\t\t\t\t\tthis.imgInfo.collectionCount = this.imgInfo.collectionCount * 1 - 1\n\t\t\t\t})\n\t\t\t},\n\n\n\t\t\tisCollectImgToAlbum() {\n\n\t\t\t\tlet params = {\n\t\t\t\t\tuid: uni.getStorageSync(\"userInfo\").id,\n\t\t\t\t\tmid: this.imgInfo.id\n\t\t\t\t}\n\t\t\t\tisCollectImgToAlbum(params).then(res => {\n\n\t\t\t\t\tthis.isCollection = res.data\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t//-----------------------------------预览图片----------------\n\t\t\tpreviewImgae(index) {\n\t\t\t\tlet that = this\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: index, // 当前显示图片的索引值\n\t\t\t\t\turls: that.imgInfo.imgsUrl, // 需要预览的图片列表，photoList要求必须是数组\n\t\t\t\t\tlongPressActions: {\n\t\t\t\t\t\titemList: ['保存', '收藏'],\n\t\t\t\t\t\tsuccess: function(data) {\n\n\t\t\t\t\t\t\t//进行保存\n\t\t\t\t\t\t\tif (data.tapIndex == 0) {\n\t\t\t\t\t\t\t\tlet p = that.downLoadImg(that.imgInfo.imgsUrl[data.index])\n\t\t\t\t\t\t\t\tp.then((data) => {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: data,\n\t\t\t\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//进行收藏\n\t\t\t\t\t\t\tif (data.tapIndex == 1) {\n\t\t\t\t\t\t\t\tthat.saveImgToAlbum()\n\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: function(err) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetOne() {\n\n\t\t\t\tlet params = {\n\t\t\t\t\tnoteId: this.noteId\n\t\t\t\t}\n\t\t\t\tgetOne(params).then(res => {\n\n\t\t\t\t\tthis.imgInfo = res.data\n\t\t\t\t\tthis.imgInfo.time = timeAgo(new Date(res.data.time))\n\t\t\t\t\tthis.imgList = JSON.parse(res.data.urls)\n\t\t\t\t\tthis.count = res.data.count\n\t\t\t\t\tthis.album = res.data.album\n\n\t\t\t\t\tthis.isFollow()\n\t\t\t\t\tthis.isAgree()\n\t\t\t\t\tthis.isCollectImgToAlbum()\n\t\t\t\t\tif (this.imgInfo.uid == uni.getStorageSync(\"userInfo\").id) {\n\t\t\t\t\t\tthis.isCurrentUser = true\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t},\n\t\t\tloadData() {\n\t\t\t\tthis.val = Math.random()\n\t\t\t},\n\n\t\t\tgetComment(comment) {\n\t\t\t\tthis.comment = comment\n\n\t\t\t\t//第二种方案\n\t\t\t\tthis.placeholder = '回复' + this.comment.username + ':'\n\t\t\t\tthis.active()\n\t\t\t},\n\n\t\t\taddComment() {\n\t\t\t\tlet userInfo = uni.getStorageSync(\"userInfo\")\n\n\t\t\t\tif (userInfo == null || typeof userInfo == 'undefined') {\n\t\t\t\t\treturn\n\t\t\t\t} else {\n\n\t\t\t\t\tlet commentInfo = {}\n\t\t\t\t\tcommentInfo.content = this.content\n\t\t\t\t\tcommentInfo.uid = userInfo.id\n\t\t\t\t\tcommentInfo.mid = this.imgInfo.id\n\t\t\t\t\t//添加一级评论\n\t\t\t\t\tif (this.comment.id == null) {\n\t\t\t\t\t\tcommentInfo.pid = 0\n\t\t\t\t\t\tcommentInfo.replyId = 0\n\t\t\t\t\t\tcommentInfo.replyUid = 0\n\t\t\t\t\t\tcommentInfo.level = 1\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcommentInfo.level = 2\n\t\t\t\t\t\tcommentInfo.replyId = this.comment.id\n\t\t\t\t\t\tcommentInfo.replyUid = this.comment.uid\n\t\t\t\t\t\t//添加二级评论\n\t\t\t\t\t\tif (this.comment.pid == 0) {\n\t\t\t\t\t\t\tcommentInfo.pid = this.comment.id\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcommentInfo.pid = this.comment.pid\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\taddComment(commentInfo).then(res => {\n\t\t\t\t\t\tthis.content = ''\n\t\t\t\t\t\tthis.comment = {}\n\t\t\t\t\t\tthis.parentId = commentInfo.pid\n\t\t\t\t\t\tthis.commentInfo = res.data\n\t\t\t\t\t\tthis.placeholder = \"请输入内容~\"\n\n\t\t\t\t\t\tif (this.imgInfo.commentCount == 0) {\n\t\t\t\t\t\t\tthis.imgInfo.commentCount = this.imgInfo.commentCount * 1 + 1\n\t\t\t\t\t\t}\n\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetUserInfo(uid) {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: \"/pages/otherUser/otherUser?uid=\" + uid\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tsaveImgToAlbum() {\n\n\t\t\t\tif (this.imgInfo.userId == uni.getStorageSync(\"userInfo\").id) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"自己不能收藏\",\n\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t});\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/addalbum/addalbum?mid=' + this.imgInfo.id\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 保存图片至本地\n\t\t\tdownLoadImg(path) {\n\t\t\t\t//下载图片资源至本地，返回文件的本地临时路径\n\t\t\t\tlet p = new Promise((resolve, reject) => {\n\t\t\t\t\tuni.downloadFile({\n\t\t\t\t\t\turl: path,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\t\t//保存图片至相册\n\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t\t\t\t\tresolve(\"保存成功\")\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfail: function() {\n\t\t\t\t\t\t\t\t\t\treject(\"保存失败\")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\treturn p;\n\n\t\t\t},\n\n\t\t\ttoAlbum(aid) {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: \"/pages/user/albums/albumInfo?albumId=\" + aid\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t//-----------------编辑功能部分------------------\n\t\t\tpopup() {\n\t\t\t\tthis.popupShow = !this.popupShow\n\t\t\t},\n\t\t\toperate(index) {\n\n\t\t\t\t//编辑操作\n\t\t\t\tif (index == 0) {\n\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: \"/pages/push/push?mid=\" + this.imgInfo.id + '&type=update' + '&version=' + 0\n\t\t\t\t\t})\n\t\t\t\t} else if (index == 1) {\n\n\t\t\t\t\tlet arr = []\n\t\t\t\t\tarr.push(this.imgInfo.id)\n\t\t\t\t\tdeleteImgs(arr, this.imgInfo.userId).then(res => {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"删除成功\"\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\turl: '/pages/index/index?currentTab=1'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 1000)\n\n\t\t\t\t\t})\n\t\t\t\t} else if (index == 3) {\n\n\t\t\t\t\tthis.batchSaveShow = true\n\t\t\t\t\t// this.isshow = true\n\t\t\t\t\tfor (var i = 0; i < this.imgInfo.imgsUrl.length; i++) {\n\t\t\t\t\t\tthis.selectImgs.push(i)\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\toperate2(index) {\n\n\t\t\t\tif (index == 0) {\n\t\t\t\t\t//批量保存\n\t\t\t\t\tthis.batchSaveShow = true\n\t\t\t\t\t// this.isshow = true\n\t\t\t\t\tfor (var i = 0; i < this.imgInfo.imgsUrl.length; i++) {\n\t\t\t\t\t\tthis.selectImgs.push(i)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tbatchShow() {\n\t\t\t\tthis.batchSaveShow = false\n\t\t\t},\n\n\t\t\tdelAffirm(index) {\n\t\t\t\tthis.selectImgs.push(index)\n\t\t\t},\n\n\t\t\tselectAll() {\n\t\t\t\tfor (let i = 0; i < this.imgInfo.imgsUrl.length; i++) {\n\t\t\t\t\tthis.selectImgs.push(i)\n\t\t\t\t}\n\t\t\t},\n\t\t\tcancalAll() {\n\n\t\t\t\tthis.selectImgs = []\n\t\t\t},\n\t\t\tdelCancel(index) {\n\t\t\t\tfor (var i = 0; i < this.selectImgs.length; i++) {\n\t\t\t\t\tif (this.selectImgs[i] == index) {\n\t\t\t\t\t\tthis.selectImgs.splice(i, 1)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tbatchSave() {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"保存中\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t});\n\n\t\t\t\tthis.selectImgs.forEach(item => {\n\t\t\t\t\tthis.downLoadImg(this.imgInfo.imgsUrl[item])\n\t\t\t\t})\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"保存成功\",\n\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.batchSaveShow = false\n\t\t\t\t}, 300)\n\t\t\t},\n\n\t\t\ttoTagList(tid) {\n\t\t\t\tconsole.log(tid)\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/tagImgList/tagImgList?tid=' + tid\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tshare(index) {\n\n\t\t\t\tif (index == 4) {\n\t\t\t\t\t//分享部分（暂未开发）\t\n\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t}\n\n\t}\n</script>\n\n<style scoped>\n\t@import url(./main.css);\n</style>"],"sourceRoot":""}