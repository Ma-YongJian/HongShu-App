(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-search-searchList"],{"0f62":function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("aa9c");var n=i(a("b7c7")),o=a("e67e"),s=a("cf17"),r=(a("e57d"),a("292f")),c=a("954f"),l={data:function(){return{triggered:!1,userInfo:{},page:1,limit:10,total:0,dataList:[],isEnd:!1,loading:!1,keyword:"",uid:"",type:0,nav:0,showMenu:!1,clickCount:0,activate:0,userList:[]}},created:function(){this.userInfo=uni.getStorageSync("userInfo")},onLoad:function(t){this.keyword=t.keyword,this.uid=t.uid,this.esSearch(0)},methods:{back:function(){uni.navigateTo({url:"/pages/index/search/search"})},selectNav:function(t){0==t?(this.showMenu=!this.showMenu,this.esSearch(0)):1==t?(this.showMenu=!1,this.searchUser()):this.showMenu=!1,this.nav=t},loadData:function(){var e=this;e.isEnd=!1,e.loading=!0,setTimeout((function(){if(0==e.nav){if(e.dataList.length>=e.total)return void(e.isEnd=!0);e.page=e.page+1;var a={};a.keyword=e.keyword,a.type=e.type,(0,s.esSearch)(e.page,e.limit,a).then((function(t){var a;(a=e.dataList).push.apply(a,(0,n.default)(t.data.records))}))}else if(1==e.nav){if(e.userList.length>=e.total)return void(e.isEnd=!0);e.page=e.page+1;var i={keyword:e.keyword,uid:e.userInfo.id};(0,r.searchUser)(e.page,e.limit,i).then((function(t){var a;(a=e.userList).push.apply(a,(0,n.default)(t.data.records))}))}else t.log("加载表情包数据")}),1e3)},getImgInfo:function(t){var e={};e.uid=this.userInfo.id,e.mid=t.id,(0,o.addBrowseRecord)(e).then((function(e){uni.navigateTo({url:"/pages/main/main?mid="+t.id})}))},search:function(){0==this.nav?this.esSearch(0):1==this.nav&&this.searchUser()},esSearch:function(t){var e=this;this.activate=t,this.type=t,this.dataList=[];var a={};a.keyword=this.keyword,a.uid=this.uid,a.type=t,this.page=1,(0,s.esSearch)(this.page,this.limit,a).then((function(t){e.dataList=t.data.records,e.total=t.data.total}))},searchUser:function(){var t=this,e={keyword:this.keyword,uid:this.userInfo.id};(0,r.searchUser)(this.page,this.limit,e).then((function(e){t.userList=e.data.records,t.total=e.data.total}))},getUserInfo:function(e){t.log("_______",e,uni.getStorageSync("userInfo").id),e==uni.getStorageSync("userInfo").id?uni.switchTab({url:"/pages/user/user"}):uni.navigateTo({url:"/pages/otherUser/otherUser?uid="+e})},follow:function(t,e){var a=this,i={};i.uid=this.userInfo.id,i.fid=t,(0,c.followUser)(i).then((function(t){a.userList[e].isfollow=!0}))},clearFollow:function(t,e){var a=this,i={};i.uid=this.userInfo.id,i.fid=t,(0,c.clearFollow)(i).then((function(t){a.userList[e].isfollow=!1}))}}};e.default=l}).call(this,a("ba7c")["default"])},"3b62":function(t,e,a){var i=a("e99b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("7fd4c2ae",i,!0,{sourceMap:!1,shadowMode:!1})},"4ae3":function(t,e,a){"use strict";var i=a("3b62"),n=a.n(i);n.a},"5e57":function(t,e,a){"use strict";a.r(e);var i=a("6f0a"),n=a("fbd6");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("4ae3");var s=a("828b"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"20b55b3a",null,!1,i["a"],void 0);e["default"]=r.exports},"6f0a":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={tuiNavigationBar:a("9ebd").default,tuiIcon:a("bd7a").default,tuiButton:a("e718").default,ppWaterfallFlow:a("cfaa").default,tuiListView:a("f34f").default,tuiListCell:a("6841").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("tui-navigation-bar",{attrs:{backgroundColor:"#fff",isFixed:!1,isOpacity:!1}},[a("v-uni-view",{staticClass:"tui-content-box"},[a("v-uni-view",{staticClass:"tui-avatar-box"},[a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("tui-icon",{attrs:{name:"arrowleft",size:"25"}})],1)],1),a("v-uni-view",{staticClass:"tui-search-box"},[a("tui-icon",{attrs:{name:"search-2",size:18,color:"#bfbfbf"}}),a("v-uni-input",{staticClass:"tui-search-text",attrs:{placeholder:"请输入搜索内容"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),a("v-uni-view",{staticClass:"tui-notice-box"},[a("tui-button",{attrs:{type:"danger",height:"54rpx",width:"100rpx",size:24},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.search()}}},[t._v("搜索")])],1)],1)],1),a("nav",{staticClass:"navbar"},[a("ul",{staticClass:"nav-list"},[a("li",{staticClass:"nav-item dropdown"},[a("a",{class:0==t.nav?"nav-link activated":"nav-link",attrs:{href:"#"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectNav(0)}}},[t._v("全部"),t.showMenu?a("tui-icon",{attrs:{name:"arrowup",size:18}}):a("tui-icon",{attrs:{name:"arrowdown",size:18}})],1),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],staticClass:"dropdown-menu"},[a("li",{class:0==t.activate?"menu-activated":""},[a("a",{attrs:{href:"#"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.esSearch(0)}}},[t._v("全部")])]),a("li",{class:1==t.activate?"menu-activated":""},[a("a",{attrs:{href:"#"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.esSearch(1)}}},[t._v("最热")])]),a("li",{class:2==t.activate?"menu-activated":""},[a("a",{attrs:{href:"#"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.esSearch(2)}}},[t._v("最新")])])])]),a("li",{staticClass:"nav-item"},[a("a",{class:1==t.nav?"nav-link activated":"nav-link",attrs:{href:"#"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectNav(1)}}},[t._v("用户")])]),a("li",{staticClass:"nav-item"},[a("a",{class:2==t.nav?"nav-link activated":"nav-link",attrs:{href:"#"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectNav(2)}}},[t._v("表情包")])])])]),a("v-uni-scroll-view",{staticClass:"page",attrs:{"scroll-y":!0},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}}},[0==t.nav?a("v-uni-view",{staticClass:"main"},[a("pp-waterfall-flow",{attrs:{value:t.dataList},on:{clickImage:function(e){arguments[0]=e=t.$handleEvent(e),t.getImgInfo.apply(void 0,arguments)}}})],1):t._e(),1==t.nav?a("v-uni-view",[a("tui-list-view",t._l(t.userList,(function(e,i){return a("tui-list-cell",{key:i,attrs:{lineLeft:!1}},[a("v-uni-view",{staticClass:"tui-item-box"},[a("v-uni-view",{staticClass:"tui-msg-box",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getUserInfo(e.id)}}},[a("v-uni-image",{staticClass:"tui-msg-pic",attrs:{src:e.avatar,mode:"aspectFill"}}),a("v-uni-view",{staticClass:"tui-msg-item"},[a("v-uni-view",{staticClass:"tui-msg-name"},[t._v(t._s(e.username))]),a("v-uni-view",{staticClass:"tui-msg-type"},[a("p",[t._v("红薯号："+t._s(e.hsId))]),a("p",[t._v("粉丝："+t._s(e.fanCount))])])],1)],1),t.userInfo.id!=e.uid?a("v-uni-view",{staticClass:"tui-msg-right"},[e.isfollow?a("tui-button",{attrs:{height:"60rpx",width:"120rpx",type:"gray",size:24},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clearFollow(e.uid,i)}}},[t._v("取消关注")]):a("tui-button",{attrs:{height:"60rpx",width:"120rpx",type:"danger",size:24},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.follow(e.uid,i)}}},[t._v("关注")])],1):t._e()],1)],1)})),1)],1):t._e(),!t.isEnd&&t.loading?a("v-uni-view",{staticClass:"loadStyle"},[a("tui-icon",{attrs:{name:"loading",size:18}})],1):t._e(),t.isEnd?a("v-uni-view",{staticClass:"loadStyle"},[t._v("我也是有底线的~")]):t._e()],1)],1)},o=[]},"954f":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.clearFollow=function(t){return i.request.post(n.appConfig.WEB_API+"/app/follow/clearFollow",t)},e.followUser=function(t){return i.request.post(n.appConfig.WEB_API+"/web/app/follow/followUser",t)},e.getAllFriend=function(t,e,a){return i.request.get(n.appConfig.WEB_API+"/app/follower/getFriend/".concat(t,"/").concat(e),a)},e.getFollow=function(t,e){return i.request.get(n.appConfig.WEB_API+"/app/follower/getFollowList/".concat(t,"/").concat(e))},e.isFollow=function(t){return i.request.get(n.appConfig.WEB_API+"/app/follower/isFollow",t)},a("c223");var i=a("fea7"),n=a("10ac")},cf17:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.addSearchRecordData=function(t){return i.request.get(n.appConfig.WEB_API+"/search/searchRecord/addSearchRecordData",t)},e.esSearch=function(t,e,a){return i.request.post(n.appConfig.WEB_API+"/app/es/note/getNoteByDTO/".concat(t,"/").concat(e),a)},e.esSearchRecord=function(t){return i.request.get(n.appConfig.WEB_API+"/app/es/record/getHotRecord",t)},a("c223");var i=a("fea7"),n=a("10ac")},e57d:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.addSearchRecord=function(t){return i.request.post(n.appConfig.WEB_API+"/app/es/record/addRecord",t)},e.deleteSearchRecord=function(t){return i.request.post(n.appConfig.WEB_API+"/app/es/record/clearRecord",t)},e.getAllSearchRecord=function(t){return i.request.get(n.appConfig.WEB_API+"/app/es/record/getRecordByKeyWord",t)};var i=a("fea7"),n=a("10ac")},e99b:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,"a[data-v-20b55b3a]{text-decoration:none;color:#7a7a7a}ul[data-v-20b55b3a]{padding-left:%?0?%}li[data-v-20b55b3a]{list-style:none}\n\n/*  */.navbar[data-v-20b55b3a]{height:%?80?%;width:100%;border-bottom:%?1?% solid #ccc;margin-bottom:%?10?%}.nav-list[data-v-20b55b3a]{width:95%;margin:auto;list-style:none;display:flex;justify-content:space-between;align-items:center}.nav-item[data-v-20b55b3a]{display:inline-block;font-size:%?24?%;margin-right:10px}.nav-link[data-v-20b55b3a]{display:block;padding:10px;text-decoration:none;color:#333}.activated[data-v-20b55b3a]{border-bottom:2px solid red}.dropdown-menu[data-v-20b55b3a]{position:absolute;background-color:#fff;width:%?120?%;z-index:999}.dropdown-menu li[data-v-20b55b3a]{padding:10px;text-align:center}.dropdown-menu li[data-v-20b55b3a]:not(:last-child){margin-bottom:%?20?%}.menu-activated[data-v-20b55b3a]{background-color:#d2d2d2}.main[data-v-20b55b3a]{\n\t/* column-count: 2;\n\tcolumn-gap: 0rpx; */width:95%;margin:auto;background-color:#f4f4f4}.tui-msg-type[data-v-20b55b3a]{margin-top:%?10?%;color:rgba(51,51,51,.6);font-size:%?22?%}.page[data-v-20b55b3a]{height:90vh}.tui-content-box[data-v-20b55b3a]{width:100%;height:44px;padding:0 %?30?%;box-sizing:border-box;display:flex;align-items:center}.tui-avatar-box[data-v-20b55b3a]{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:1px solid #eaeef1;flex-shrink:0}.tui-search-box[data-v-20b55b3a]{width:100%;height:32px;margin:0 %?28?%;border-radius:18px;font-size:14px;background-color:#f1f1f1;padding:0 12px;box-sizing:border-box;color:#bfbfbf;display:flex;align-items:center}.tui-search-text[data-v-20b55b3a]{padding-left:%?10?%}.tui-notice-box[data-v-20b55b3a]{position:relative;flex-shrink:0;font-size:%?44?%;color:#fff}.loadStyle[data-v-20b55b3a]{margin-top:%?20?%;width:100%;height:%?60?%;text-align:center;color:#bfbfbf}\n\n/* 用户列表 */.tui-item-box[data-v-20b55b3a]{width:100%;display:flex;align-items:center}.tui-msg-box[data-v-20b55b3a]{display:flex;align-items:center}.tui-msg-pic[data-v-20b55b3a]{width:%?100?%;height:%?100?%;border-radius:50%;display:block;margin-right:%?24?%;flex-shrink:0}.tui-msg-img[data-v-20b55b3a]{width:%?120?%;height:%?160?%;border-radius:5px;display:block;margin-right:%?24?%;flex-shrink:0}.tui-msg-item[data-v-20b55b3a]{max-width:%?500?%;min-height:%?100?%;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}.tui-msg-right[data-v-20b55b3a]{max-width:%?120?%;height:%?88?%;margin-left:auto;text-align:right;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-end}",""]),t.exports=e},fbd6:function(t,e,a){"use strict";a.r(e);var i=a("0f62"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a}}]);