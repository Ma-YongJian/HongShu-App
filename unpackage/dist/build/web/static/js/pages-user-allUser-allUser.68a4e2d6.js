(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-allUser-allUser","pages-user-collections-collectionImgs-collectionImgs"],{"00cc":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'.tui-btn-primary[data-v-afe04e5c]{background:#5677fc!important;color:#fff}.tui-shadow-primary[data-v-afe04e5c]{box-shadow:0 %?10?% %?14?% 0 rgba(86,119,252,.2)}.tui-btn-danger[data-v-afe04e5c]{background:#eb0909!important;color:#fff}.tui-shadow-danger[data-v-afe04e5c]{box-shadow:0 %?10?% %?14?% 0 rgba(235,9,9,.2)}.tui-btn-warning[data-v-afe04e5c]{background:#fc872d!important;color:#fff}.tui-shadow-warning[data-v-afe04e5c]{box-shadow:0 %?10?% %?14?% 0 rgba(252,135,45,.2)}.tui-btn-green[data-v-afe04e5c]{background:#07c160!important;color:#fff}.tui-shadow-green[data-v-afe04e5c]{box-shadow:0 %?10?% %?14?% 0 rgba(7,193,96,.2)}.tui-btn-blue[data-v-afe04e5c]{background:#007aff!important;color:#fff}.tui-shadow-blue[data-v-afe04e5c]{box-shadow:0 %?10?% %?14?% 0 rgba(0,122,255,.2)}.tui-btn-white[data-v-afe04e5c]{background:#fff!important;color:#333!important}.tui-btn-gray[data-v-afe04e5c]{background:#bfbfbf!important;color:#fff!important}.tui-btn-black[data-v-afe04e5c]{background:#333!important;color:#fff!important}.tui-btn-brown[data-v-afe04e5c]{background:#ac9157!important;color:#fff!important}.tui-btn-gray-black[data-v-afe04e5c]{background:#f2f2f2!important;color:#333}.tui-btn-gray-primary[data-v-afe04e5c]{background:#f2f2f2!important;color:#5677fc!important;\n}.tui-gray-primary-hover[data-v-afe04e5c]{background:#d9d9d9!important}.tui-btn-gray-green[data-v-afe04e5c]{background:#f2f2f2!important;color:#07c160!important;\n}.tui-gray-green-hover[data-v-afe04e5c]{background:#d9d9d9!important}.tui-btn-gray-danger[data-v-afe04e5c]{background:#f2f2f2!important;color:#eb0909!important;\n}.tui-gray-danger-hover[data-v-afe04e5c]{background:#d9d9d9!important}.tui-btn-gray-warning[data-v-afe04e5c]{background:#f2f2f2!important;color:#fc872d!important;\n}.tui-gray-warning-hover[data-v-afe04e5c]{background:#d9d9d9!important}.tui-shadow-gray[data-v-afe04e5c]{box-shadow:0 %?10?% %?14?% 0 hsla(0,0%,74.9%,.2)}.tui-hover-gray[data-v-afe04e5c]{background:#f7f7f9!important}.tui-black-hover[data-v-afe04e5c]{background:#555!important;color:#e5e5e5!important}.tui-brown-hover[data-v-afe04e5c]{background:#a37f49!important;color:#e5e5e5!important}\n\n/* button start*/.tui-btn[data-v-afe04e5c]{width:100%;position:relative;\nborder:0!important;\n\n\nborder-radius:%?6?%;padding-left:0;padding-right:0;overflow:visible;display:flex;align-items:center;justify-content:center}.tui-btn__flex-1[data-v-afe04e5c]{flex:1}\n.tui-btn[data-v-afe04e5c]::after{content:"";position:absolute;width:200%;height:200%;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5) translateZ(0);transform:scale(.5) translateZ(0);box-sizing:border-box;left:0;top:0;border-radius:%?12?%;border:0}\n.tui-text-bold[data-v-afe04e5c]{font-weight:700}\n.tui-btn-white[data-v-afe04e5c]::after{border:1px solid #bfbfbf}\n.tui-white-hover[data-v-afe04e5c]{background:#e5e5e5!important;color:#2e2e2e!important}.tui-dark-disabled[data-v-afe04e5c]{opacity:.6!important;color:#fafbfc!important}.tui-dark-disabled-outline[data-v-afe04e5c]{\n\nopacity:.5!important}.tui-gray-disabled[data-v-afe04e5c]{background:#f3f3f3!important;color:#919191!important;box-shadow:none}.tui-outline-hover[data-v-afe04e5c]{opacity:.5!important}.tui-primary-hover[data-v-afe04e5c]{background:#4a67d6!important;color:#e5e5e5!important}\n.tui-primary-outline[data-v-afe04e5c]::after{border:1px solid #5677fc!important}\n.tui-primary-outline[data-v-afe04e5c]{color:#5677fc!important;background:transparent;\n}.tui-danger-hover[data-v-afe04e5c]{background:#c80808!important;color:#e5e5e5!important}.tui-danger-outline[data-v-afe04e5c]{color:#eb0909!important;background:transparent;\n}\n.tui-danger-outline[data-v-afe04e5c]::after{border:1px solid #eb0909!important}\n.tui-warning-hover[data-v-afe04e5c]{background:#d67326!important;color:#e5e5e5!important}.tui-warning-outline[data-v-afe04e5c]{color:#fc872d!important;background:transparent;\n}\n.tui-warning-outline[data-v-afe04e5c]::after{border:1px solid #fc872d!important}\n.tui-green-hover[data-v-afe04e5c]{background:#06ad56!important;color:#e5e5e5!important}.tui-green-outline[data-v-afe04e5c]{color:#07c160!important;background:transparent;\n}\n.tui-green-outline[data-v-afe04e5c]::after{border:1px solid #07c160!important}\n.tui-blue-hover[data-v-afe04e5c]{background:#0062cc!important;color:#e5e5e5!important}.tui-blue-outline[data-v-afe04e5c]{color:#007aff!important;background:transparent;\n}\n.tui-blue-outline[data-v-afe04e5c]::after{border:1px solid #007aff!important}\n.tui-btn-gradual[data-v-afe04e5c]{background:linear-gradient(90deg,#ff5926,#f00e2c)!important;color:#fff!important}.tui-shadow-gradual[data-v-afe04e5c]{box-shadow:0 %?10?% %?14?% 0 rgba(235,9,9,.15)}\n.tui-gray-hover[data-v-afe04e5c]{background:#a3a3a3!important;color:#898989}\n.tui-gradual-hover[data-v-afe04e5c]{background:linear-gradient(90deg,#d74620,#cd1225)!important;color:#fff!important}\n.tui-gray-outline[data-v-afe04e5c]{color:#999!important;background:transparent!important}.tui-white-outline[data-v-afe04e5c]{color:#fff!important;background:transparent!important;\n}.tui-black-outline[data-v-afe04e5c]{background:transparent!important;color:#333!important;\n}\n.tui-gray-outline[data-v-afe04e5c]::after{border:1px solid #ccc!important}\n.tui-white-outline[data-v-afe04e5c]::after{border:1px solid #fff!important}.tui-black-outline[data-v-afe04e5c]::after{border:1px solid #333!important}.tui-brown-outline[data-v-afe04e5c]::after{border:1px solid #ac9157!important}\n.tui-brown-outline[data-v-afe04e5c]{color:#ac9157!important;background:transparent;\n}\n\n/*圆角 */.tui-fillet[data-v-afe04e5c]{border-radius:%?50?%}.tui-btn-white.tui-fillet[data-v-afe04e5c]::after{border-radius:%?98?%}.tui-outline-fillet[data-v-afe04e5c]::after{border-radius:%?98?%}\n\n/*平角*/.tui-rightAngle[data-v-afe04e5c]{border-radius:0}.tui-btn-white.tui-rightAngle[data-v-afe04e5c]::after{border-radius:0}.tui-outline-rightAngle[data-v-afe04e5c]::after{border-radius:0}\n.tui-btn__link[data-v-afe04e5c]::after{border:0!important}',""]),t.exports=e},"12f2":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,"a[data-v-64b9fecd]{text-decoration:none;color:#000}.container[data-v-64b9fecd]{padding-bottom:env(safe-area-inset-bottom)}.page[data-v-64b9fecd]{height:91vh}.nav[data-v-64b9fecd]{display:flex;align-items:center;height:%?80?%}.search[data-v-64b9fecd]{display:flex}.search-input[data-v-64b9fecd]{width:%?550?%;height:%?60?%;background-color:#f1f1f1;padding-left:10px;border-radius:%?30?%}.search uni-button[data-v-64b9fecd]{width:%?120?%;height:%?60?%;background-color:#ec2124;font-size:16px;color:#fff;line-height:%?60?%}.tui-item-box[data-v-64b9fecd]{width:100%;display:flex;align-items:center;margin-left:%?25?%}.tui-msg-box[data-v-64b9fecd]{display:flex;align-items:center}.tui-msg-pic[data-v-64b9fecd]{width:%?100?%;height:%?100?%;border-radius:50%;display:block;margin-right:%?24?%;flex-shrink:0}.tui-msg-img[data-v-64b9fecd]{width:%?120?%;height:%?160?%;border-radius:5px;display:block;margin-right:%?24?%;flex-shrink:0}.tui-msg-item[data-v-64b9fecd]{max-width:%?500?%;min-height:%?100?%;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}.tui-msg-type[data-v-64b9fecd]{margin-top:%?10?%;color:rgba(51,51,51,.6);font-size:%?22?%}.tui-msg-name[data-v-64b9fecd]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:%?30?%;line-height:1;color:#262b3a}.tui-msg-content[data-v-64b9fecd]{max-width:%?380?%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:%?25?%;line-height:2;color:#9397a4}.tui-msg-right[data-v-64b9fecd]{max-width:%?120?%;height:%?88?%;margin-left:auto;text-align:right;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-end}.tui-right-dot[data-v-64b9fecd]{height:%?76?%!important;padding-bottom:%?10?%!important}.tui-msg-time[data-v-64b9fecd]{width:%?100?%;margin-left:3px;font-size:%?24?%;line-height:%?24?%;color:#9397a4}",""]),t.exports=e},"292f":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.clearUserRecord=function(t){return i.request.get(n.appConfig.WEB_API+"/app/im/chat/clearMessageCount",t)},e.getMe=function(t){return i.request.get(n.appConfig.WEB_API+"/manage/user/getOne",t)},e.getTrendByUser=function(t,e,a){return i.request.get(n.appConfig.WEB_API+"/app/user/getTrendByUser/".concat(t,"/").concat(e),a)},e.getUserInfo=function(t){return i.request.get(n.appConfig.WEB_API+"/app/user/getUserById",t)},e.getUserRecord=function(t){return i.request.get(n.appConfig.WEB_API+"/app/im/chat/getChatUserList",t)},e.searchUser=function(t,e,a){return i.request.get(n.appConfig.WEB_API+"/app/user/getUserByKeyword/".concat(t,"/").concat(e),a)},e.searchUserByUsername=function(t){return i.request.get(n.appConfig.WEB_API+"/web/user/searchUserByUsername",t)},e.updateUser=function(t){return i.request.post(n.appConfig.WEB_API+"/app/user/updateUser",t)},a("c223");var i=a("fea7"),n=a("10ac")},"5dd0":function(t,e,a){"use strict";var i=a("8dda"),n=a.n(i);n.a},7105:function(t,e,a){var i=a("00cc");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("2e39d00b",i,!0,{sourceMap:!1,shadowMode:!1})},"7c49":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i}));var i={tuiNavigationBar:a("9ebd").default,tuiIcon:a("bd7a").default,tuiButton:a("e718").default,tuiListView:a("f34f").default,tuiListCell:a("6841").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("tui-navigation-bar",{attrs:{backgroundColor:"#fff",isFixed:!1,isOpacity:!1}},[a("v-uni-view",{staticClass:"nav"},[a("tui-icon",{attrs:{name:"arrowleft",size:"25"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"search"},[a("v-uni-input",{staticClass:"search-input",attrs:{placeholder:"输入内容"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("tui-button",{staticStyle:{"border-radius":"30rpx"},attrs:{type:"danger",height:"60rpx ",width:"120rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.searchUser.apply(void 0,arguments)}}},[t._v("搜索")])],1)],1)],1),a("v-uni-scroll-view",{staticClass:"page",attrs:{"scroll-y":!0},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}}},[a("tui-list-view",t._l(t.dataList,(function(e,i){return a("tui-list-cell",{key:i,attrs:{lineLeft:!1}},[a("v-uni-view",{staticClass:"tui-item-box"},[a("v-uni-view",{staticClass:"tui-msg-box",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getUserInfo(e.uid)}}},[a("v-uni-image",{staticClass:"tui-msg-pic",attrs:{src:e.avatar,mode:"aspectFill","lazy-load":!0}}),a("v-uni-view",{staticClass:"tui-msg-item"},[a("v-uni-view",{staticClass:"tui-msg-name"},[t._v(t._s(e.username))]),a("v-uni-view",{staticClass:"tui-msg-type"},[a("p",[t._v("红薯号："+t._s(e.hsId))]),a("p",[t._v("粉丝："+t._s(e.fanCount))])])],1)],1),t.uid==t.loginUid?a("v-uni-view",{staticClass:"tui-msg-right"},[1==t.type?a("v-uni-view",[a("tui-button",{staticStyle:{"border-radius":"30rpx","margin-right":"50rpx"},attrs:{height:"60rpx",width:"120rpx",type:"gray",size:24,shape:"circle",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clearFollow(e.uid,i)}}},[t._v("取消关注")])],1):t._e(),0==t.type?a("v-uni-view",[e.isfollow?t._e():a("tui-button",{staticStyle:{"border-radius":"30rpx","margin-right":"50rpx"},attrs:{height:"60rpx",width:"120rpx",type:"danger",size:24,shape:"circle",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.follow(e.uid,i)}}},[t._v("回关")])],1):t._e()],1):t._e()],1)],1)})),1)],1),!t.isEnd&&t.loading?a("v-uni-view",{staticClass:"loadStyle"},[t._v("正在加载中")]):t._e(),t.isEnd?a("v-uni-view",{staticClass:"loadStyle"},[t._v("我也是有底线的~")]):t._e()],1)},r=[]},"81a5":function(t,e,a){"use strict";a.r(e);var i=a("7c49"),n=a("a808");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("5dd0");var o=a("828b"),d=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"64b9fecd",null,!1,i["a"],void 0);e["default"]=d.exports},"8dda":function(t,e,a){var i=a("12f2");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("17d83fc2",i,!0,{sourceMap:!1,shadowMode:!1})},"954f":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.clearFollow=function(t){return i.request.post(n.appConfig.WEB_API+"/app/follow/clearFollow",t)},e.followUser=function(t){return i.request.post(n.appConfig.WEB_API+"/web/app/follow/followUser",t)},e.getAllFriend=function(t,e,a){return i.request.get(n.appConfig.WEB_API+"/app/follower/getFriend/".concat(t,"/").concat(e),a)},e.getFollow=function(t,e){return i.request.get(n.appConfig.WEB_API+"/app/follower/getFollowList/".concat(t,"/").concat(e))},e.isFollow=function(t){return i.request.get(n.appConfig.WEB_API+"/app/follower/isFollow",t)},a("c223");var i=a("fea7"),n=a("10ac")},a808:function(t,e,a){"use strict";a.r(e);var i=a("da171"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},c3e0:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa"),a("5ef2");var i={name:"tuiButton",emits:["click","getuserinfo","contact","getphonenumber","error"],behaviors:["wx://form-field-button"],props:{type:{type:String,default:"primary"},shadow:{type:Boolean,default:!1},width:{type:String,default:"100%"},height:{type:String,default:"96rpx"},size:{type:Number,default:32},bold:{type:Boolean,default:!1},margin:{type:String,default:"0"},shape:{type:String,default:"square"},plain:{type:Boolean,default:!1},link:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledGray:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},formType:{type:String,default:""},openType:{type:String,default:""},index:{type:[Number,String],default:0},preventClick:{type:Boolean,default:!1}},data:function(){return{time:0}},methods:{handleClick:function(){var t=this;if(!this.disabled){if(this.preventClick){if((new Date).getTime()-this.time<=200)return;this.time=(new Date).getTime(),setTimeout((function(){t.time=0}),200)}this.$emit("click",{index:Number(this.index)})}},bindgetuserinfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.detail,a=void 0===e?{}:e;this.$emit("getuserinfo",a)},bindcontact:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.detail,a=void 0===e?{}:e;this.$emit("contact",a)},bindgetphonenumber:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.detail,a=void 0===e?{}:e;this.$emit("getphonenumber",a)},binderror:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.detail,a=void 0===e?{}:e;this.$emit("error",a)},getShadowClass:function(t,e,a){var i="";return e&&"white"!=t&&!a&&(i="tui-shadow-"+t),i},getDisabledClass:function(t,e,a){var i="";if(t&&"white"!=e&&-1==e.indexOf("-")){var n=this.disabledGray?"tui-gray-disabled":"tui-dark-disabled";i=a?"tui-dark-disabled-outline":n}return i},getShapeClass:function(t,e){var a="";return"circle"==t?a=e?"tui-outline-fillet":"tui-fillet":"rightAngle"==t&&(a=e?"tui-outline-rightAngle":"tui-rightAngle"),a},getHoverClass:function(t,e,a){var i="";return t||(i=a?"tui-outline-hover":"tui-"+(e||"primary")+"-hover"),i}}};e.default=i},cdd0:function(t,e,a){"use strict";var i=a("7105"),n=a.n(i);n.a},da171:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("aa9c"),a("dd2b");var n=i(a("b7c7")),r=a("292f"),o=a("954f"),d={data:function(){return{keyword:"",dataList:[],uid:"",type:0,key:0,T:!1,loginUid:"",page:1,limit:10,total:0,isEnd:!1,loading:!1}},onLoad:function(t){this.uid=t.uid,this.type=t.type,this.loginUid=uni.getStorageSync("userInfo").id,this.getAllFriend()},created:function(){},methods:{back:function(){uni.navigateBack({delta:1})},searchUser:function(){var t=this,e={keyword:this.keyword};(0,r.searchUser)(e).then((function(e){t.dataList=e.data}))},getUserInfo:function(t){t==uni.getStorageSync("userInfo").id?uni.switchTab({url:"/pages/user/user"}):uni.navigateTo({url:"/pages/otherUser/otherUser?uid="+t})},getAllFriend:function(){var t=this,e={uid:this.uid,type:this.type};(0,o.getAllFriend)(this.page,this.limit,e).then((function(e){t.dataList=e.data.records,t.total=e.data.total}))},loadData:function(){var t=this;if(this.page=this.page+1,this.dataList.length>=this.total)this.isEnd=!0;else{var e={uid:this.uid,type:this.type};getAllFanUser(this.page,this.limit,e).then((function(e){var a;(a=t.dataList).push.apply(a,(0,n.default)(e.data.records))}))}},follow:function(t,e){var a=this,i=uni.getStorageSync("userInfo"),n={};n.uid=i.id,n.fid=t,(0,o.followUser)(n).then((function(t){a.getAllFriend(i.id,0)}))},clearFollow:function(t,e){var a=this,i=uni.getStorageSync("userInfo"),n={};n.uid=i.id,n.fid=t,(0,o.clearFollow)(n).then((function(t){a.dataList.splice(e,1)}))}}};e.default=d},debb:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-button",{staticClass:"tui-btn",class:[t.plain?"tui-"+t.type+"-outline":"tui-btn-"+(t.type||"primary"),t.getDisabledClass(t.disabled,t.type,t.plain),t.getShapeClass(t.shape,t.plain),t.getShadowClass(t.type,t.shadow,t.plain),t.bold?"tui-text-bold":"",t.link?"tui-btn__link":"","100%"!==t.width&&t.width&&!0!==t.width?"":"tui-btn__flex-1"],style:{width:t.width,height:t.height,lineHeight:t.height,fontSize:t.size+"rpx",margin:t.margin},attrs:{"hover-class":t.getHoverClass(t.disabled,t.type,t.plain),loading:t.loading,"form-type":t.formType,"open-type":t.openType,disabled:t.disabled},on:{getuserinfo:function(e){arguments[0]=e=t.$handleEvent(e),t.bindgetuserinfo.apply(void 0,arguments)},getphonenumber:function(e){arguments[0]=e=t.$handleEvent(e),t.bindgetphonenumber.apply(void 0,arguments)},contact:function(e){arguments[0]=e=t.$handleEvent(e),t.bindcontact.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.binderror.apply(void 0,arguments)},click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.handleClick.apply(void 0,arguments)}}},[t._t("default")],2)},n=[]},e718:function(t,e,a){"use strict";a.r(e);var i=a("debb"),n=a("e874");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("cdd0");var o=a("828b"),d=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"afe04e5c",null,!1,i["a"],void 0);e["default"]=d.exports},e874:function(t,e,a){"use strict";a.r(e);var i=a("c3e0"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},fea7:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.request=void 0,a("bf0f"),a("2797"),a("aa9c"),a("5c47"),a("a1c1"),a("c9b5"),a("ab80");var i=a("10ac"),n=a("efb0"),r=!1,o=[],d=function(t){o.forEach((function(e){return e(t)})),o=[]},u=function(t){o.push(t)},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return new Promise((function(o,c){var l=uni.getStorageSync("expiration");if(l){var f=l.toString().replace(/-/g,"/"),s=new Date(f).valueOf(),p=(new Date).valueOf(),g=(s-p)/1e3/60/60;if(g<1&&!r){r=!0;var v=uni.getStorageSync("userInfo");uni.request({method:"post",url:i.appConfig.WEB_API+"/app/auth/refreshToken",data:v,header:{"Content-Type":"application/json"},success:function(t){var e=t.data.data.JwtToken;uni.setStorageSync("expiration",t.data.data.expiration),n.tokenUtil.set(e),r=!1,d(e)},fail:function(t){r=!1,c(t)}}),u((function(t){b(t)}))}else r?u((function(t){b(t)})):b(n.tokenUtil.get())}else b(n.tokenUtil.get());function b(r){uni.request({method:a,url:t,data:e,header:function(){var t=n.tokenUtil.getUserId(),e={"Content-Type":"application/json"};return r&&(e[i.appConfig.tokenKey]=r,e[i.appConfig.userKey]=t),e}(),success:function(t){uni.hideLoading(),401==t.data.code?(uni.showToast({icon:"none",title:"用户未认证或登录过期,请重新登录"}),uni.removeStorageSync("userInfo"),n.tokenUtil.clear(),setTimeout((function(){uni.reLaunch({url:"/pages/login/login"})}),1e3)):o(t.data)},fail:function(t){uni.hideLoading(),c(t)}})}}))},l={get:function(t,e){return c(t,e,"GET")},post:function(t,e){return c(t,e,"POST")}};e.request=l}}]);