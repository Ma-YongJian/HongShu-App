(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-message-message-comments-message-comments","pages-user-collections-collectionImgs-collectionImgs"],{"0842":function(t,e,n){var i=n("163d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("e45b0cda",i,!0,{sourceMap:!1,shadowMode:!1})},"163d":function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,'.container[data-v-53c5eebe]{padding-bottom:env(safe-area-inset-bottom)}.nav[data-v-53c5eebe]{display:flex;align-items:center}.page[data-v-53c5eebe]{height:85vh}.tui-item-box[data-v-53c5eebe]{width:100%;display:flex}.tui-msg-box[data-v-53c5eebe]{display:flex}.tui-msg-pic[data-v-53c5eebe]{width:%?100?%;height:%?100?%;border-radius:50%;display:block;margin-right:%?24?%;flex-shrink:0}.tui-msg-img[data-v-53c5eebe]{width:%?120?%;height:%?100?%;border-radius:5px;display:block;margin-right:%?24?%;flex-shrink:0}.tui-msg-item[data-v-53c5eebe]{width:%?400?%;min-height:%?100?%;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}.tui-msg-type[data-v-53c5eebe]{display:flex;align-items:center;justify-content:flex-start;font-size:%?25?%}.tui-msg-type-item[data-v-53c5eebe]{width:%?160?%;margin-top:%?10?%;color:#9397a4}.tui-msg-time[data-v-53c5eebe]{width:%?140?%;margin-top:%?10?%;margin-left:3px;font-size:%?24?%;line-height:%?24?%;color:#9397a4}uni-button[data-v-53c5eebe]{background:#f1f1f1;color:#5c5c5c;border:%?0?% solid #f1f1f1;font-size:%?18?%;width:%?150?%;height:%?35?%;margin-left:%?0?%;line-height:%?34?%}.tui-msg-name[data-v-53c5eebe]{margin-top:%?20?%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:%?30?%;line-height:1;color:#262b3a}.tui-msg-content[data-v-53c5eebe]{max-width:%?380?%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:%?25?%;line-height:2;color:#5c5c5c}.reply[data-v-53c5eebe]{margin-left:10px;color:#bfbfbf}.reply[data-v-53c5eebe]::before{content:"|";color:red;font-weight:700}.tui-msg-right[data-v-53c5eebe]{max-width:%?120?%;margin-left:auto;text-align:right;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-end}.tui-right-dot[data-v-53c5eebe]{height:%?76?%!important;padding-bottom:%?10?%!important}.loadStyle[data-v-53c5eebe]{margin-top:%?20?%;width:100%;height:%?60?%;text-align:center;color:#bfbfbf}',""]),t.exports=e},3876:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.addComment=function(t){return i.request.post(a.appConfig.WEB_API+"/app/comment/addComment",t)},e.delComment=function(t){return i.request.get(a.appConfig.WEB_API+"/app/comment/delComment",t)},e.getAllComment=function(t,e,n){return i.request.get(a.appConfig.WEB_API+"/app/comment/getCommentWithCommentByNoteId/".concat(t,"/").concat(e),n)},e.getAllOneCommentByImgId=function(t,e,n){return i.request.get(a.appConfig.WEB_API+"/app/comment/getAllOneCommentByImgId/".concat(t,"/").concat(e),n)},e.getAllReplyComment=function(t,e,n){return i.request.get(a.appConfig.WEB_API+"/app/comment/getNoticeComment/".concat(t,"/").concat(e),n)},e.getAllTrendCommentByImage=function(t,e,n){return i.request.get(a.appConfig.WEB_API+"/app/comment/getAllTrendCommentByImage/".concat(t,"/").concat(e),n)},e.getAllTwoComment=function(t){return i.request.get(a.appConfig.WEB_API+"/app/comment/getAllTwoComment",t)},e.getAllTwoCommentByOneId=function(t,e,n){return i.request.get(a.appConfig.WEB_API+"/app/comment/getAllTwoCommentByOneId/".concat(t,"/").concat(e),n)},e.getComment=function(t){return i.request.get(a.appConfig.WEB_API+"/app/comment/getComment",t)},e.scrollComment=function(t){return i.request.get(a.appConfig.WEB_API+"/app/comment/scrollComment",t)},n("c223");var i=n("fea7"),a=n("10ac")},"3b47":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={tuiNavigationBar:n("9ebd").default,tuiIcon:n("bd7a").default,tuiListView:n("f34f").default,tuiListCell:n("6841").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("tui-navigation-bar",{attrs:{backgroundColor:"#fff",isFixed:!1,isOpacity:!1}},[n("v-uni-view",{staticClass:"nav"},[n("tui-icon",{attrs:{name:"arrowleft",size:"24"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}),n("v-uni-view",[t._v("评论和@")])],1)],1),n("v-uni-scroll-view",{staticClass:"page",attrs:{"scroll-y":!0},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}}},[n("tui-list-view",t._l(t.dataList,(function(e,i){return n("tui-list-cell",{key:i,attrs:{lineLeft:!1}},[n("v-uni-view",{staticClass:"tui-item-box"},[n("v-uni-view",{staticClass:"tui-msg-box"},[n("v-uni-image",{staticClass:"tui-msg-pic",attrs:{src:e.avatar,mode:"aspectFill","lazy-load":!0},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.getUserInfo(e.uid)}}}),n("v-uni-view",{staticClass:"tui-msg-item",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.getComment(e.nid,e.id,e.replyId)}}},[n("v-uni-view",{staticClass:"tui-msg-name"},[t._v(t._s(e.username))]),n("v-uni-view",{staticClass:"tui-msg-type"},[e.replyUid!=t.uid?n("v-uni-view",{staticClass:"tui-msg-type-item"},[t._v("评论您的笔记")]):n("v-uni-view",{staticClass:"tui-msg-type-item"},[t._v("回复您的评论")]),n("v-uni-view",{staticClass:"tui-msg-time"},[t._v(t._s(e.time))])],1),n("v-uni-view",{staticClass:"tui-msg-content"},[t._v(t._s(e.content))]),0!=e.replyId?n("v-uni-view",{staticClass:"tui-msg-content "},[n("v-uni-view",{staticClass:"reply",staticStyle:{display:"flex"}},[e.replyUid!=t.uid?n("v-uni-view",[t._v(t._s(e.replyName)+":")]):t._e(),n("v-uni-view",[t._v(t._s(e.replyContent))])],1)],1):t._e()],1)],1),n("v-uni-view",{staticClass:"tui-msg-right"},[n("v-uni-image",{staticClass:"tui-msg-img",attrs:{src:e.cover,mode:"aspectFit","lazy-load":!0}})],1)],1)],1)})),1),!t.isEnd&&t.loading?n("v-uni-view",{staticClass:"loadStyle"},[t._v("正在加载中")]):t._e(),t.isEnd?n("v-uni-view",{staticClass:"loadStyle"},[t._v("我也是有底线的~")]):t._e()],1)],1)},o=[]},"73e1":function(t,e,n){"use strict";var i=n("29d8");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(i)},"795c":function(t,e,n){"use strict";var i=n("8bdb"),a=n("db04").start,o=n("73e1");i({target:"String",proto:!0,forced:o},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},a881:function(t,e,n){"use strict";n.r(e);var i=n("d621"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},afaf:function(t,e,n){"use strict";function i(t,e){var n,i={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var a in i)n=new RegExp("("+a+")").exec(t),n&&(t=t.replace(n[1],1==n[1].length?i[a]:i[a].padStart(n[1].length,"0")));return t}n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.IsURL=function(t){var e=new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-zA-Z_!~*'().&=+$%-]+: )?[0-9a-zA-Z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-zA-Z_!~*'()-]+.)*([0-9a-zA-Z][0-9a-zA-Z-]{0,61})?[0-9a-zA-Z].[a-zA-Z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-zA-Z_!~*'().;?:@&=+$,%#-]+)+/?)$");return e.test(t)},e.dateFormat=i,e.formatData=function(t){var e=new URLSearchParams;for(var n in t)e.append(n,t[n]);return e},e.timeAgo=function(t){var e="",n=864e5,i=(new Date).getTime(),a=i-t;if(a<0)return e;var o=a/6e4,r=a/36e5,s=a/n,c=a/6048e5,u=a/2592e6,l=a/31536e6;o=parseInt(o),r=parseInt(r),s=parseInt(s),c=parseInt(c),u=parseInt(u),l=parseInt(l),u>12?e=" "+parseInt(l)+"年前":u>=1&&u<12?e=" "+parseInt(u)+"月前":c>=1&&c<=4?e=" "+parseInt(c)+"周前":s>=1&&s<=6?e=" "+parseInt(s)+"天前":r>=1&&r<=23?e=" "+parseInt(r)+"小时前":o>=1&&o<=59?e=" "+parseInt(o)+"分钟前":a>=0&&a<=6e4&&(e="刚刚");return e},e.timestampToDateTime=function(t){var e=new Date(t);return i("YYYY-mm-dd HH:MM",e)},n("bf0f"),n("18f7"),n("de6c"),n("2425"),n("c9b5"),n("ab80"),n("5c47"),n("23f4"),n("7d2f"),n("9c4e"),n("a1c1"),n("795c"),n("0506"),n("e966")},d621:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("bf0f"),n("2797"),n("aa9c");var i=n("3876"),a=n("e67e"),o=n("afaf"),r={data:function(){return{page:1,limit:8,total:0,isEnd:!1,loading:!1,dataList:[],uid:""}},created:function(){this.uid=uni.getStorageSync("userInfo").id,this.getAllReplyComment()},methods:{back:function(){uni.navigateBack({delta:1})},getAllReplyComment:function(){var t=this,e={uid:this.uid};(0,i.getAllReplyComment)(this.page,this.limit,e).then((function(e){e.data.records.forEach((function(e){e.time=(0,o.timeAgo)(e.time),t.dataList.push(e)})),t.total=e.data.length}))},getComment:function(t,e,n){var i={};i.uid=this.uid,i.mid=t,(0,a.addBrowseRecord)(i).then((function(i){uni.navigateTo({url:"/pages/main/main?mid="+t+"&cid="+e+"&rid="+n})}))},loadData:function(){var t=this;if(this.page=this.page+1,this.total<this.limit)this.isEnd=!0;else{var e={uid:this.uid};(0,i.getAllReplyComment)(this.page,this.limit,e).then((function(e){e.data.forEach((function(e){e.time=(0,o.timeAgo)(e.createDate),t.dataList.push(e)})),t.total=e.data.length}))}},getUserInfo:function(t){uni.navigateTo({url:"/pages/otherUser/otherUser?uid="+t})}}};e.default=r},db04:function(t,e,n){"use strict";var i=n("bb80"),a=n("c435"),o=n("9e70"),r=n("f298"),s=n("862c"),c=i(r),u=i("".slice),l=Math.ceil,d=function(t){return function(e,n,i){var r,d,f=o(s(e)),g=a(n),p=f.length,m=void 0===i?" ":o(i);return g<=p||""===m?f:(r=g-p,d=c(m,l(r/m.length)),d.length>r&&(d=u(d,0,r)),t?f+d:d+f)}};t.exports={start:d(!1),end:d(!0)}},e351:function(t,e,n){"use strict";n.r(e);var i=n("3b47"),a=n("a881");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("f4f8");var r=n("828b"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"53c5eebe",null,!1,i["a"],void 0);e["default"]=s.exports},e67e:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.addBrowseRecord=function(t){return i.request.post(a.appConfig.WEB_API+"/app/browseRecord/addBrowseRecord",t)},e.delRecord=function(t,e){return i.request.post(a.appConfig.WEB_API+"/app/browseRecord/delRecord/".concat(e),t)},e.getAllBrowseRecordByUser=function(t,e,n){return i.request.get(a.appConfig.WEB_API+"/app/browseRecord/getAllBrowseRecordByUser/".concat(t,"/").concat(e),n)},n("c223");var i=n("fea7"),a=n("10ac")},f298:function(t,e,n){"use strict";var i=n("497b"),a=n("9e70"),o=n("862c"),r=RangeError;t.exports=function(t){var e=a(o(this)),n="",s=i(t);if(s<0||s===1/0)throw new r("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(n+=e);return n}},f4f8:function(t,e,n){"use strict";var i=n("0842"),a=n.n(i);a.a},fea7:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.request=void 0,n("bf0f"),n("2797"),n("aa9c"),n("5c47"),n("a1c1"),n("c9b5"),n("ab80");var i=n("10ac"),a=n("efb0"),o=!1,r=[],s=function(t){r.forEach((function(e){return e(t)})),r=[]},c=function(t){r.push(t)},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return new Promise((function(r,u){var l=uni.getStorageSync("expiration");if(l){var d=l.toString().replace(/-/g,"/"),f=new Date(d).valueOf(),g=(new Date).valueOf(),p=(f-g)/1e3/60/60;if(p<1&&!o){o=!0;var m=uni.getStorageSync("userInfo");uni.request({method:"post",url:i.appConfig.WEB_API+"/app/auth/refreshToken",data:m,header:{"Content-Type":"application/json"},success:function(t){var e=t.data.data.JwtToken;uni.setStorageSync("expiration",t.data.data.expiration),a.tokenUtil.set(e),o=!1,s(e)},fail:function(t){o=!1,u(t)}}),c((function(t){v(t)}))}else o?c((function(t){v(t)})):v(a.tokenUtil.get())}else v(a.tokenUtil.get());function v(o){uni.request({method:n,url:t,data:e,header:function(){var t=a.tokenUtil.getUserId(),e={"Content-Type":"application/json"};return o&&(e[i.appConfig.tokenKey]=o,e[i.appConfig.userKey]=t),e}(),success:function(t){uni.hideLoading(),401==t.data.code?(uni.showToast({icon:"none",title:"用户未认证或登录过期,请重新登录"}),uni.removeStorageSync("userInfo"),a.tokenUtil.clear(),setTimeout((function(){uni.reLaunch({url:"/pages/login/login"})}),1e3)):r(t.data)},fail:function(t){uni.hideLoading(),u(t)}})}}))},l={get:function(t,e){return u(t,e,"GET")},post:function(t,e){return u(t,e,"POST")}};e.request=l}}]);