(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-message-message-agrees-message-agrees","pages-user-collections-collectionImgs-collectionImgs"],{"04bd":function(t,e,i){"use strict";var n=i("793d"),a=i.n(n);a.a},"18e46":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={tuiNavigationBar:i("9ebd").default,tuiIcon:i("bd7a").default,tuiListView:i("f34f").default,tuiListCell:i("6841").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("tui-navigation-bar",{attrs:{backgroundColor:"#fff",isFixed:!1,isOpacity:!1}},[i("v-uni-view",{staticClass:"nav"},[i("tui-icon",{attrs:{name:"arrowleft",size:"24"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}),i("v-uni-view",[t._v("赞和收藏")])],1)],1),i("v-uni-scroll-view",{staticClass:"page",attrs:{"scroll-y":!0},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}}},[i("tui-list-view",t._l(t.dataList,(function(e,n){return i("tui-list-cell",{key:n,attrs:{lineLeft:!1}},[i("v-uni-view",{staticClass:"tui-item-box"},[i("v-uni-view",{staticClass:"tui-msg-box"},[i("v-uni-image",{staticClass:"tui-msg-pic",attrs:{src:e.avatar,mode:"aspectFill"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getUserInfo(e.uid)}}}),3==e.type?i("v-uni-view",{staticClass:"tui-msg-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getAlbum(e.aid)}}},[i("v-uni-view",{staticClass:"tui-msg-name"},[t._v(t._s(e.username))]),i("v-uni-view",{staticClass:"tui-msg-type"},[i("v-uni-view",{staticClass:"tui-msg-type-item"},[t._v("收藏您的专辑")]),i("v-uni-view",{staticClass:"tui-msg-time"},[t._v(t._s(e.time))])],1),0==e.type?i("v-uni-view",{staticClass:"tui-msg-content"},[t._v(t._s(e.content))]):t._e()],1):i("v-uni-view",{staticClass:"tui-msg-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getImg(e.itemId)}}},[i("v-uni-view",{staticClass:"tui-msg-name"},[t._v(t._s(e.username))]),i("v-uni-view",{staticClass:"tui-msg-type"},[3==e.type?i("v-uni-view",{staticClass:"tui-msg-type-item"},[t._v("收藏您的专辑")]):t._e(),2==e.type?i("v-uni-view",{staticClass:"tui-msg-type-item"},[t._v("收藏您的笔记")]):t._e(),1==e.type?i("v-uni-view",{staticClass:"tui-msg-type-item"},[t._v("点赞您的笔记")]):t._e(),0==e.type?i("v-uni-view",{staticClass:"tui-msg-type-item"},[t._v("点赞您的评论")]):t._e(),i("v-uni-view",{staticClass:"tui-msg-time"},[t._v(t._s(e.time))])],1),0==e.type?i("v-uni-view",{staticClass:"tui-msg-content"},[t._v(t._s(e.content))]):t._e()],1)],1),i("v-uni-view",{staticClass:"tui-msg-right"},[i("v-uni-image",{attrs:{src:e.cover,mode:"aspectFit","lazy-load":!0}})],1)],1)],1)})),1),!t.isEnd&&t.loading?i("v-uni-view",{staticClass:"loadStyle"},[t._v("正在加载中")]):t._e(),t.isEnd?i("v-uni-view",{staticClass:"loadStyle"},[t._v("我也是有底线的~")]):t._e()],1)],1)},o=[]},"1daf":function(t,e,i){"use strict";(function(t){i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("bf0f"),i("2797"),i("aa9c");var n=i("f17d"),a=i("e67e"),o=i("afaf"),s={data:function(){return{dataList:[],page:1,limit:10,total:0,isEnd:!1,loading:!1,uid:""}},created:function(){this.uid=uni.getStorageSync("userInfo").id,this.getAllAgreeAndCollection()},methods:{back:function(){uni.navigateBack({delta:1})},getAllAgreeAndCollection:function(){var e=this,i={uid:this.uid};(0,n.getAllAgreeAndCollection)(this.page,this.limit,i).then((function(i){t.log(i),i.data.records.forEach((function(t){t.time=(0,o.timeAgo)(t.time),e.dataList.push(t)})),e.total=i.data.total}))},getImg:function(t){var e={};e.uid=this.uid,e.mid=t,(0,a.addBrowseRecord)(e).then((function(e){uni.navigateTo({url:"/pages/main/main?mid="+t})}))},getAlbum:function(t){uni.navigateTo({url:"/pages/user/albums/albumInfo?albumId="+t})},loadData:function(){var t=this;if(this.page=this.page+1,this.total<this.limit)this.isEnd=!0;else{var e={uid:this.uid};(0,n.getAllAgreeAndCollection)(this.page,this.limit,e).then((function(e){e.data.records.forEach((function(e){e.time=(0,o.timeAgo)(e.time),t.dataList.push(e)}))}))}},getUserInfo:function(t){uni.navigateTo({url:"/pages/otherUser/otherUser?uid="+t})}}};e.default=s}).call(this,i("ba7c")["default"])},"73e1":function(t,e,i){"use strict";var n=i("29d8");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},"76c6":function(t,e,i){"use strict";i.r(e);var n=i("1daf"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"793d":function(t,e,i){var n=i("99bc");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("720852a3",n,!0,{sourceMap:!1,shadowMode:!1})},"795c":function(t,e,i){"use strict";var n=i("8bdb"),a=i("db04").start,o=i("73e1");n({target:"String",proto:!0,forced:o},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"99bc":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'.container[data-v-1e1639a8]{padding-bottom:env(safe-area-inset-bottom)}.nav[data-v-1e1639a8]{display:flex;align-items:center}.page[data-v-1e1639a8]{height:85vh}.tui-item-box[data-v-1e1639a8]{width:100%;display:flex}.tui-msg-box[data-v-1e1639a8]{display:flex;align-items:center}.tui-msg-pic[data-v-1e1639a8]{width:%?100?%;height:%?100?%;border-radius:50%;display:block;margin-right:%?24?%;flex-shrink:0}.tui-msg-img[data-v-1e1639a8]{width:%?120?%;height:%?160?%;border-radius:5px;display:block;margin-right:%?24?%;flex-shrink:0}.tui-msg-item[data-v-1e1639a8]{width:%?400?%;min-height:%?80?%;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}.tui-msg-type[data-v-1e1639a8]{display:flex;align-items:center;justify-content:flex-start;font-size:%?25?%}.tui-msg-type-item[data-v-1e1639a8]{width:%?160?%}.tui-msg-time[data-v-1e1639a8]{width:%?140?%;font-size:%?24?%;line-height:%?24?%;margin-left:%?20?%;color:#9397a4}.tui-msg-name[data-v-1e1639a8]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:%?30?%;line-height:1;color:#262b3a}.tui-msg-content[data-v-1e1639a8]{max-width:%?380?%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:%?25?%;line-height:2;color:#9397a4;margin-left:10px}.tui-msg-content[data-v-1e1639a8]::before{content:"|";color:#f90000}.tui-msg-right[data-v-1e1639a8]{width:%?120?%;height:%?88?%;margin-left:auto;text-align:right;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-end}.tui-msg-right uni-image[data-v-1e1639a8]{max-width:%?88?%}.tui-right-dot[data-v-1e1639a8]{height:%?76?%!important;padding-bottom:%?10?%!important}.loadStyle[data-v-1e1639a8]{margin-top:%?20?%;width:100%;height:%?60?%;text-align:center;color:#bfbfbf}',""]),t.exports=e},afaf:function(t,e,i){"use strict";function n(t,e){var i,n={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var a in n)i=new RegExp("("+a+")").exec(t),i&&(t=t.replace(i[1],1==i[1].length?n[a]:n[a].padStart(i[1].length,"0")));return t}i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.IsURL=function(t){var e=new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-zA-Z_!~*'().&=+$%-]+: )?[0-9a-zA-Z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-zA-Z_!~*'()-]+.)*([0-9a-zA-Z][0-9a-zA-Z-]{0,61})?[0-9a-zA-Z].[a-zA-Z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-zA-Z_!~*'().;?:@&=+$,%#-]+)+/?)$");return e.test(t)},e.dateFormat=n,e.formatData=function(t){var e=new URLSearchParams;for(var i in t)e.append(i,t[i]);return e},e.timeAgo=function(t){var e="",i=864e5,n=(new Date).getTime(),a=n-t;if(a<0)return e;var o=a/6e4,s=a/36e5,r=a/i,u=a/6048e5,c=a/2592e6,l=a/31536e6;o=parseInt(o),s=parseInt(s),r=parseInt(r),u=parseInt(u),c=parseInt(c),l=parseInt(l),c>12?e=" "+parseInt(l)+"年前":c>=1&&c<12?e=" "+parseInt(c)+"月前":u>=1&&u<=4?e=" "+parseInt(u)+"周前":r>=1&&r<=6?e=" "+parseInt(r)+"天前":s>=1&&s<=23?e=" "+parseInt(s)+"小时前":o>=1&&o<=59?e=" "+parseInt(o)+"分钟前":a>=0&&a<=6e4&&(e="刚刚");return e},e.timestampToDateTime=function(t){var e=new Date(t);return n("YYYY-mm-dd HH:MM",e)},i("bf0f"),i("18f7"),i("de6c"),i("2425"),i("c9b5"),i("ab80"),i("5c47"),i("23f4"),i("7d2f"),i("9c4e"),i("a1c1"),i("795c"),i("0506"),i("e966")},d669:function(t,e,i){"use strict";i.r(e);var n=i("18e46"),a=i("76c6");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("04bd");var s=i("828b"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"1e1639a8",null,!1,n["a"],void 0);e["default"]=r.exports},db04:function(t,e,i){"use strict";var n=i("bb80"),a=i("c435"),o=i("9e70"),s=i("f298"),r=i("862c"),u=n(s),c=n("".slice),l=Math.ceil,d=function(t){return function(e,i,n){var s,d,f=o(r(e)),g=a(i),p=f.length,v=void 0===n?" ":o(n);return g<=p||""===v?f:(s=g-p,d=u(v,l(s/v.length)),d.length>s&&(d=c(d,0,s)),t?f+d:d+f)}};t.exports={start:d(!1),end:d(!0)}},e67e:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.addBrowseRecord=function(t){return n.request.post(a.appConfig.WEB_API+"/app/browseRecord/addBrowseRecord",t)},e.delRecord=function(t,e){return n.request.post(a.appConfig.WEB_API+"/app/browseRecord/delRecord/".concat(e),t)},e.getAllBrowseRecordByUser=function(t,e,i){return n.request.get(a.appConfig.WEB_API+"/app/browseRecord/getAllBrowseRecordByUser/".concat(t,"/").concat(e),i)},i("c223");var n=i("fea7"),a=i("10ac")},f17d:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.agree=function(t){return n.request.post(a.appConfig.WEB_API+"/app/likeOrCollection/likeOrCollectionByDTO",t)},e.cancelAgree=function(t){return n.request.post(a.appConfig.WEB_API+"/app/likeOrCollection/likeOrCollectionByDTO",t)},e.cancelCollection=function(t){return n.request.post(a.appConfig.WEB_API+"/app/agreeCollect/cancelCollection",t)},e.collection=function(t){return n.request.post(a.appConfig.WEB_API+"/app/agreeCollect/collection",t)},e.getAllAgreeAndCollection=function(t,e,i){return n.request.get(a.appConfig.WEB_API+"/app/likeOrCollection/getNoticeLikeOrCollection/".concat(t,"/").concat(e),i)},e.getAllCollection=function(t,e,i){return n.request.get(a.appConfig.WEB_API+"/app/user/getTrendByUser/".concat(t,"/").concat(e),i)},e.isAgree=function(t){return n.request.post(a.appConfig.WEB_API+"/app/likeOrCollection/isLikeOrCollection",t)},e.isAgrees=function(t){return n.request.post(a.appConfig.WEB_API+"/app/likeOrCollection/isLikeOrCollections",t)},i("c223");var n=i("fea7"),a=i("10ac")},f298:function(t,e,i){"use strict";var n=i("497b"),a=i("9e70"),o=i("862c"),s=RangeError;t.exports=function(t){var e=a(o(this)),i="",r=n(t);if(r<0||r===1/0)throw new s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},fea7:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.request=void 0,i("bf0f"),i("2797"),i("aa9c"),i("5c47"),i("a1c1"),i("c9b5"),i("ab80");var n=i("10ac"),a=i("efb0"),o=!1,s=[],r=function(t){s.forEach((function(e){return e(t)})),s=[]},u=function(t){s.push(t)},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return new Promise((function(s,c){var l=uni.getStorageSync("expiration");if(l){var d=l.toString().replace(/-/g,"/"),f=new Date(d).valueOf(),g=(new Date).valueOf(),p=(f-g)/1e3/60/60;if(p<1&&!o){o=!0;var v=uni.getStorageSync("userInfo");uni.request({method:"post",url:n.appConfig.WEB_API+"/app/auth/refreshToken",data:v,header:{"Content-Type":"application/json"},success:function(t){var e=t.data.data.JwtToken;uni.setStorageSync("expiration",t.data.data.expiration),a.tokenUtil.set(e),o=!1,r(e)},fail:function(t){o=!1,c(t)}}),u((function(t){m(t)}))}else o?u((function(t){m(t)})):m(a.tokenUtil.get())}else m(a.tokenUtil.get());function m(o){uni.request({method:i,url:t,data:e,header:function(){var t=a.tokenUtil.getUserId(),e={"Content-Type":"application/json"};return o&&(e[n.appConfig.tokenKey]=o,e[n.appConfig.userKey]=t),e}(),success:function(t){uni.hideLoading(),401==t.data.code?(uni.showToast({icon:"none",title:"用户未认证或登录过期,请重新登录"}),uni.removeStorageSync("userInfo"),a.tokenUtil.clear(),setTimeout((function(){uni.reLaunch({url:"/pages/login/login"})}),1e3)):s(t.data)},fail:function(t){uni.hideLoading(),c(t)}})}}))},l={get:function(t,e){return c(t,e,"GET")},post:function(t,e){return c(t,e,"POST")}};e.request=l}}]);