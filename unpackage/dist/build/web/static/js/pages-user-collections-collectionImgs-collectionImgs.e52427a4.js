(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-collections-collectionImgs-collectionImgs"],{fea7:function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.request=void 0,t("bf0f"),t("2797"),t("aa9c"),t("5c47"),t("a1c1"),t("c9b5"),t("ab80");var o=t("10ac"),i=t("efb0"),a=!1,u=[],r=function(e){u.forEach((function(n){return n(e)})),u=[]},c=function(e){u.push(e)},s=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return new Promise((function(u,s){var f=uni.getStorageSync("expiration");if(f){var l=f.toString().replace(/-/g,"/"),p=new Date(l).valueOf(),d=(new Date).valueOf(),g=(p-d)/1e3/60/60;if(g<1&&!a){a=!0;var h=uni.getStorageSync("userInfo");uni.request({method:"post",url:o.appConfig.WEB_API+"/app/auth/refreshToken",data:h,header:{"Content-Type":"application/json"},success:function(e){var n=e.data.data.JwtToken;uni.setStorageSync("expiration",e.data.data.expiration),i.tokenUtil.set(n),a=!1,r(n)},fail:function(e){a=!1,s(e)}}),c((function(e){v(e)}))}else a?c((function(e){v(e)})):v(i.tokenUtil.get())}else v(i.tokenUtil.get());function v(a){uni.request({method:t,url:e,data:n,header:function(){var e=i.tokenUtil.getUserId(),n={"Content-Type":"application/json"};return a&&(n[o.appConfig.tokenKey]=a,n[o.appConfig.userKey]=e),n}(),success:function(e){uni.hideLoading(),401==e.data.code?(uni.showToast({icon:"none",title:"用户未认证或登录过期,请重新登录"}),uni.removeStorageSync("userInfo"),i.tokenUtil.clear(),setTimeout((function(){uni.reLaunch({url:"/pages/login/login"})}),1e3)):u(e.data)},fail:function(e){uni.hideLoading(),s(e)}})}}))},f={get:function(e,n){return s(e,n,"GET")},post:function(e,n){return s(e,n,"POST")}};n.request=f}}]);